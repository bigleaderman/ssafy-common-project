{"ast":null,"code":"var _jsxFileName = \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\src\\\\components\\\\GatherRoomPageCom\\\\PlayMap.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { SavePosX, selectPosX } from \"../../redux/slice/GatherMapPosXSlice\";\nimport { SavePosY, selectPosY } from \"../../redux/slice/GatherMapPosYSlice\";\nexport default function PlayMap(props) {\n  var dispatch = useDispatch();\n\n  var listener = function listener(event) {\n    event.preventDefault();\n    event.returnValue = \"\";\n    dispatch(SavePosX(pX.current));\n    dispatch(SavePosY(pY.current));\n  };\n\n  var enablePrevent = function enablePrevent() {\n    return window.addEventListener(\"beforeunload\", listener);\n  }; //맵 크기\n\n\n  var size = 700; //포커싱 지정을 위한 변수\n\n  var mapFocus = useRef(); // const charX = useRef(useSelector(selectPosX));\n  // const charY = useRef(useSelector(selectPosY));\n\n  var myChar; //부드러운 움직임을 위한 변수 선언\n\n  var keyPress = {},\n      // pX = useSelector(selectPosX),\n  // pY = useSelector(selectPosY),\n  pX = useRef(useSelector(selectPosX)),\n      pY = useRef(useSelector(selectPosY)),\n      speed = 5; //0.1초마다 키 입력 확인\n\n  var inputCheck = setInterval(function () {\n    if (keyPress[87]) pY.current -= speed;\n    if (keyPress[83]) pY.current += speed; // down - s\n\n    if (keyPress[65]) pX.current -= speed; // left - a\n\n    if (keyPress[68]) pX.current += speed; // myChar.style.left = pX.current + \"px\";\n    // myChar.style.top = pY.current + \"px\";\n\n    console.log(\"interval\");\n  }, 10); //첫 렌더링될 때만 입력받는 input태그로 focus\n\n  useEffect(function () {\n    mapFocus.current.focus();\n  }, []); //렌더링될 때마다 myChar가 #myCharacter 를 가르킴\n\n  useEffect(function () {\n    myChar = document.getElementById(\"myCharacter\"); //랜더링 종료 시 인터벌 종료\n\n    return function () {\n      clearInterval(inputCheck);\n      console.log(\"pX : \", pX.current);\n      console.log(\"pY : \", pY.current);\n    };\n  }); //맵 클릭 시 입력 포커싱 지정\n\n  var changeFocus = function changeFocus() {\n    mapFocus.current.focus();\n  };\n\n  var handleKeyDown = function handleKeyDown(e) {\n    keyPress[e.keyCode.toString()] = true;\n  };\n\n  var handleKeyUp = function handleKeyUp(e) {\n    keyPress[e.keyCode.toString()] = false;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: changeFocus,\n    style: {\n      width: size,\n      height: size,\n      background: \"orange\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myCharacter\",\n    style: {\n      left: \"\".concat(pX.current, \" px\"),\n      top: \"\".concat(pY.current, \" px\"),\n      width: 50,\n      height: 50,\n      background: \"red\",\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    // style={{ display: \"none\" }}\n    type: \"text\",\n    ref: mapFocus,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    readOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }), \"playMap\");\n}","map":{"version":3,"names":["React","useRef","useEffect","useState","useSelector","useDispatch","SavePosX","selectPosX","SavePosY","selectPosY","PlayMap","props","dispatch","listener","event","preventDefault","returnValue","pX","current","pY","enablePrevent","window","addEventListener","size","mapFocus","myChar","keyPress","speed","inputCheck","setInterval","console","log","focus","document","getElementById","clearInterval","changeFocus","handleKeyDown","e","keyCode","toString","handleKeyUp","width","height","background","left","top","position"],"sources":["C:/SSAFY/2nd semester/S07P12D106/front/src/components/GatherRoomPageCom/PlayMap.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { SavePosX, selectPosX } from \"../../redux/slice/GatherMapPosXSlice\";\r\nimport { SavePosY, selectPosY } from \"../../redux/slice/GatherMapPosYSlice\";\r\nexport default function PlayMap(props) {\r\n    const dispatch = useDispatch();\r\n\r\n    const listener = (event) => {\r\n        event.preventDefault();\r\n        event.returnValue = \"\";\r\n        dispatch(SavePosX(pX.current));\r\n        dispatch(SavePosY(pY.current));\r\n    };\r\n\r\n    const enablePrevent = () =>\r\n        window.addEventListener(\"beforeunload\", listener);\r\n\r\n    //맵 크기\r\n    const size = 700;\r\n    //포커싱 지정을 위한 변수\r\n    const mapFocus = useRef();\r\n    // const charX = useRef(useSelector(selectPosX));\r\n    // const charY = useRef(useSelector(selectPosY));\r\n    let myChar;\r\n\r\n    //부드러운 움직임을 위한 변수 선언\r\n    let keyPress = {},\r\n        // pX = useSelector(selectPosX),\r\n        // pY = useSelector(selectPosY),\r\n        pX = useRef(useSelector(selectPosX)),\r\n        pY = useRef(useSelector(selectPosY)),\r\n        speed = 5;\r\n\r\n    //0.1초마다 키 입력 확인\r\n    const inputCheck = setInterval(() => {\r\n        if (keyPress[87]) pY.current -= speed;\r\n        if (keyPress[83]) pY.current += speed; // down - s\r\n        if (keyPress[65]) pX.current -= speed; // left - a\r\n        if (keyPress[68]) pX.current += speed;\r\n\r\n        // myChar.style.left = pX.current + \"px\";\r\n        // myChar.style.top = pY.current + \"px\";\r\n        console.log(\"interval\");\r\n    }, 10);\r\n\r\n    //첫 렌더링될 때만 입력받는 input태그로 focus\r\n    useEffect(() => {\r\n        mapFocus.current.focus();\r\n    }, []);\r\n\r\n    //렌더링될 때마다 myChar가 #myCharacter 를 가르킴\r\n    useEffect(() => {\r\n        myChar = document.getElementById(\"myCharacter\");\r\n\r\n        //랜더링 종료 시 인터벌 종료\r\n        return () => {\r\n            clearInterval(inputCheck);\r\n            console.log(\"pX : \", pX.current);\r\n            console.log(\"pY : \", pY.current);\r\n        };\r\n    });\r\n\r\n    //맵 클릭 시 입력 포커싱 지정\r\n    const changeFocus = () => {\r\n        mapFocus.current.focus();\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        keyPress[e.keyCode.toString()] = true;\r\n    };\r\n    const handleKeyUp = (e) => {\r\n        keyPress[e.keyCode.toString()] = false;\r\n    };\r\n    return (\r\n        <div>\r\n            <div\r\n                onClick={changeFocus}\r\n                style={{\r\n                    width: size,\r\n                    height: size,\r\n                    background: \"orange\",\r\n                }}\r\n            >\r\n                <div\r\n                    id=\"myCharacter\"\r\n                    style={{\r\n                        left: `${pX.current} px`,\r\n                        top: `${pY.current} px`,\r\n                        width: 50,\r\n                        height: 50,\r\n                        background: \"red\",\r\n                        position: \"relative\",\r\n                    }}\r\n                ></div>\r\n            </div>\r\n            <input\r\n                // style={{ display: \"none\" }}\r\n                type=\"text\"\r\n                ref={mapFocus}\r\n                onKeyDown={handleKeyDown}\r\n                onKeyUp={handleKeyUp}\r\n                readOnly\r\n            />\r\n            playMap\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}