{"ast":null,"code":"var _jsxFileName = \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\src\\\\pages\\\\KakaoLoginPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { Container } from '../style.js';\nimport { login, getUser } from \"../redux/slice/UserSlice\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst KakaoLoginPage = props => {\n  _s();\n\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const code = searchParams.get('code');\n    axios({\n      method: 'get',\n      url: 'https://i7d106.p.ssafy.io:8080/oauth/callback/kakao',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      params: {\n        code\n      }\n    }).then(response => {\n      dispatch(login({ ...response.data\n      }));\n      axios({\n        method: 'get',\n        url: '/api/user/me',\n        headers: {\n          Authorization: 'Bearer ' + response.data.accessToken\n        }\n      }).then(response2 => {\n        dispatch(getUser(response2.data));\n\n        if (response2.data.auth) {\n          navigate(\"/\");\n        } else {\n          navigate(\"/emailAuth\");\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 401) {}\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(KakaoLoginPage, \"ECgL2VH5nqNVxgAmVk3OxqOp5Ok=\", false, function () {\n  return [useSearchParams, useNavigate, useDispatch];\n});\n\n_c = KakaoLoginPage;\nexport default KakaoLoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"KakaoLoginPage\");","map":{"version":3,"names":["React","useEffect","useSearchParams","useNavigate","useDispatch","Container","login","getUser","axios","KakaoLoginPage","props","searchParams","navigate","dispatch","code","get","method","url","headers","params","then","response","data","Authorization","accessToken","response2","auth","catch","error","status"],"sources":["C:/SSAFY/2nd semester/S07P12D106/front/src/pages/KakaoLoginPage.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useSearchParams, useNavigate } from  \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Container } from '../style.js';\r\nimport { login, getUser } from \"../redux/slice/UserSlice\";\r\nimport axios from 'axios';\r\n\r\n\r\nconst KakaoLoginPage = (props) => {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const code = searchParams.get('code')\r\n    axios({\r\n      method: 'get',\r\n      url: 'https://i7d106.p.ssafy.io:8080/oauth/callback/kakao',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      params: {\r\n        code,\r\n      }\r\n    })\r\n    .then((response) => {\r\n      dispatch(login({...response.data}));\r\n      axios({\r\n        method: 'get',\r\n        url: '/api/user/me',\r\n        headers: {\r\n            Authorization: 'Bearer ' + response.data.accessToken,\r\n        }\r\n      })\r\n      .then(response2 => {\r\n        dispatch(getUser(response2.data));\r\n        if (response2.data.auth) {\r\n          navigate(\"/\");\r\n        } else {\r\n          navigate(\"/emailAuth\");\r\n        }\r\n      })\r\n    })\r\n    .catch(error => {\r\n      if (error.response.status === 401) {\r\n      }\r\n    })\r\n  }, []);\r\n  \r\n  return(\r\n    <Container>\r\n      {/* 스피너 추가 */}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default KakaoLoginPage;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,eAAT,EAA0BC,WAA1B,QAA8C,kBAA9C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,KAAT,EAAgBC,OAAhB,QAA+B,0BAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAGA,MAAMC,cAAc,GAAIC,KAAD,IAAW;EAAA;;EAChC,MAAM,CAACC,YAAD,IAAiBT,eAAe,EAAtC;EACA,MAAMU,QAAQ,GAAGT,WAAW,EAA5B;EACA,MAAMU,QAAQ,GAAGT,WAAW,EAA5B;EAEAH,SAAS,CAAC,MAAM;IACd,MAAMa,IAAI,GAAGH,YAAY,CAACI,GAAb,CAAiB,MAAjB,CAAb;IACAP,KAAK,CAAC;MACJQ,MAAM,EAAE,KADJ;MAEJC,GAAG,EAAE,qDAFD;MAGJC,OAAO,EAAE;QACP,gBAAgB;MADT,CAHL;MAMJC,MAAM,EAAE;QACNL;MADM;IANJ,CAAD,CAAL,CAUCM,IAVD,CAUOC,QAAD,IAAc;MAClBR,QAAQ,CAACP,KAAK,CAAC,EAAC,GAAGe,QAAQ,CAACC;MAAb,CAAD,CAAN,CAAR;MACAd,KAAK,CAAC;QACJQ,MAAM,EAAE,KADJ;QAEJC,GAAG,EAAE,cAFD;QAGJC,OAAO,EAAE;UACLK,aAAa,EAAE,YAAYF,QAAQ,CAACC,IAAT,CAAcE;QADpC;MAHL,CAAD,CAAL,CAOCJ,IAPD,CAOMK,SAAS,IAAI;QACjBZ,QAAQ,CAACN,OAAO,CAACkB,SAAS,CAACH,IAAX,CAAR,CAAR;;QACA,IAAIG,SAAS,CAACH,IAAV,CAAeI,IAAnB,EAAyB;UACvBd,QAAQ,CAAC,GAAD,CAAR;QACD,CAFD,MAEO;UACLA,QAAQ,CAAC,YAAD,CAAR;QACD;MACF,CAdD;IAeD,CA3BD,EA4BCe,KA5BD,CA4BOC,KAAK,IAAI;MACd,IAAIA,KAAK,CAACP,QAAN,CAAeQ,MAAf,KAA0B,GAA9B,EAAmC,CAClC;IACF,CA/BD;EAgCD,CAlCQ,EAkCN,EAlCM,CAAT;EAoCA,oBACE,QAAC,SAAD;IAAA;IAAA;IAAA;EAAA,QADF;AAKD,CA9CD;;GAAMpB,c;UACmBP,e,EACNC,W,EACAC,W;;;KAHbK,c;AAgDN,eAAeA,cAAf"},"metadata":{},"sourceType":"module"}