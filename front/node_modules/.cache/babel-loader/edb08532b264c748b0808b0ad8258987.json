{"ast":null,"code":"import _slicedToArray from \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\src\\\\components\\\\GatherRoomPageCom\\\\PlayMap.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { SavePosX, selectPosX } from \"../../redux/slice/MapPosXSlice\";\nimport { SavePosY, selectPosY } from \"../../redux/slice/MapPosYSlice\";\nimport { getUser } from \"../../redux/slice/UserSlice\";\nimport { useBeforeunload } from \"react-beforeunload\"; //방 번호 필요\n//socktjs\n\nimport SockJS from \"sockjs-client\";\nimport { Client, Message } from \"@stomp/stompjs\"; //memo : 값을 메모이\n//callback : 함수를 메모이\n\nexport default function PlayMap() {\n  var _this = this;\n\n  //this is merge-request\n  var subGatherRoom = null;\n  var dispatch = useDispatch();\n  var seatNum, seatChange, seatCnt, seatNothing;\n  var mapSize = 700;\n  var charSize = 50;\n  var chairSize = 20;\n  var table = {\n    tbTop: 100,\n    tbLeft: 200,\n    width: 300,\n    height: 300\n  };\n  var chairs = [[40, 300], [40, 400], [160, 100], [300, 100], [450, 300], [450, 400], [160, 550], [300, 550]]; //다른 StompJs 코드\n  //맵 크기\n  //포커싱 지정을 위한 변수\n\n  var mapFocus = useRef(); //div태그를 아바타 객체로 지정\n\n  var myChar;\n  var keyPress = {},\n      pX = useRef(useSelector(selectPosX)),\n      pY = useRef(useSelector(selectPosY)),\n      speed = 5; //SockJs + StompJs\n\n  var StompJs = require(\"@stomp/stompjs\");\n\n  var client2 = StompJs.Client({\n    //websocket 주소만 입력 가능 * ws://, wss:// 로 시작\n    // brokerURL: \"https://i7d106.p.ssafy.io:8080/ws\",\n    connectHeaders: {},\n    debug: function debug(str) {\n      console.log(str);\n    },\n    reconnectDelay: 5000,\n    heartbeatIncoming: 4000,\n    heartbeatOutgoing: 4000\n  });\n\n  client2.webSocketFactory = function () {\n    return new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\n  };\n\n  console.log(\" client2.onConnect\");\n\n  client2.onConnect = function (frame) {\n    console.log(\"client2.onConnect\"); //구독하는 곳\n\n    subGatherRoom = client2.subscribe(\"/sub/room/0\", onMessageReceived);\n    console.log(\"frame: \", frame); //유저 방 입장\n\n    userJoin();\n    setInterval(function () {\n      client2.publish({\n        destination: \"/sub/room/0\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          header: {\n            type: \"interact\"\n          },\n          data: {\n            nickname: \"닉네임\",\n            status: \"move\",\n            chairNum: null,\n            x: pX.current,\n            y: pY.current\n          }\n        }),\n        skipContentLengthHeader: true\n      });\n    }, 1000);\n  };\n\n  client2.onStompError = function (frame) {\n    // Will be invoked in case of error encountered at Broker\n    // Bad login/passcode typically will cause an error\n    // Complaint brokers will set `message` header with a brief message. Body may contain details.\n    // Compliant brokers will terminate the connection after any error\n    console.log(\"Broker reported error: \" + frame.headers[\"message\"]);\n    console.log(\"Additional details: \" + frame.body);\n  };\n\n  console.log(\"client2.activate();\");\n  client2.activate(); //웹 소켓 코드 끝\n  //웹소켓 코드 시작\n  // const connect = () => {\n  //     console.log(\"function connect\");\n  //     //소켓 주소를 탑재한 객체 생성\n  //     let Sock = new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\n  //     console.log(\"let Sock: \", Sock);\n  //     //스톰프 프로토콜 탑재\n  //     stompClient = over(Sock);\n  //     console.log(\"1 let stompClient: \", stompClient);\n  //     //연결, 에러 콜백함수 탑재해서 연결 시도\n  //     stompClient.connect({}, onConnected, onError);\n  //     console.log(\"2 let stompClient: \", stompClient);\n  // };\n  // const onConnected = () => {\n  //     console.log(\"let stompClient: \", stompClient);\n  //     console.log(\"function onConnected\");\n  //     // setUserData({ ...userData, connected: true });\n  //     //세부 주소 구독\n  //     stompClient.subscribe(\"/sub/room/0\", onMessageReceived);\n  //     userJoin();\n  //     console.log(\"let stompClient: \", stompClient);\n  // };\n\n  var userJoin = function userJoin() {\n    client2.publish({\n      destination: \"/sub/room/0\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        header: {\n          type: \"join\"\n        },\n        data: {\n          nickname: \"닉네임\"\n        }\n      }),\n      skipContentLengthHeader: true\n    });\n  }; // const onError = (err) => {\n  //     console.log(\"function onError\");\n  //     console.log(err);\n  // };\n\n\n  var onMessageReceived = function onMessageReceived(payload) {\n    console.log(\"function onMessageReceived\");\n    console.log(\"payload: \", payload);\n    var payloadData = JSON.parse(payload.body);\n    console.log(\"payloadData: \", payloadData);\n  }; // const handleMessage = (event) => {\n  //     console.log(\"function handleMessage\");\n  //     const { value } = event.target;\n  //     setUserData({ ...userData, message: value });\n  // };\n  //웹소켓 코드 끝\n  //렌더링될 때마다 myChar가 #myCharacter 를 가르킴\n\n\n  useEffect(function () {\n    myChar = document.getElementById(\"myCharacter\");\n    console.log(\"myChar rendered\"); //랜더링 종료 시 인터벌 종료\n\n    return function () {\n      clearInterval(inputCheck);\n      console.log(\"pX : \", pX.current);\n      console.log(\"pY : \", pY.current);\n      dispatch(SavePosX(pX.current));\n      dispatch(SavePosY(pY.current));\n      console.log(\"render returned\");\n      client2.publish({\n        destination: \"/sub/room/0\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          header: {\n            type: \"leave\"\n          },\n          data: {\n            nickname: \"Jik\"\n          }\n        }),\n        skipContentLengthHeader: true\n      }); //랜더링이 종료될 때 소켓 통신 종료\n\n      client2.onWebSocketClose(); // subGatherRoom.un\n    };\n  }); //부드러운 움직임을 위한 변수 선언\n  //일정 초마다 키 입력 확인\n\n  var inputCheck = setInterval(function () {\n    if (keyPress[87]) pY.current -= speed;\n    if (keyPress[83]) pY.current += speed; // down - s\n\n    if (keyPress[65]) pX.current -= speed; // left - a\n\n    if (keyPress[68]) pX.current += speed; //테이블 충돌 감지\n\n    if (pX.current < table.tbLeft + table.width && pX.current + charSize > table.tbLeft && pY.current < table.tbTop + table.height && charSize + pY.current > table.tbTop) {\n      if (keyPress[87]) pY.current += speed;\n      if (keyPress[83]) pY.current -= speed; // down - s\n\n      if (keyPress[65]) pX.current += speed; // left - a\n\n      if (keyPress[68]) pX.current -= speed;\n    }\n\n    seatNum = -1; //의자 충돌 감지\n\n    for (var i = 0; i < 8; i++) {\n      if (chairs[i][1] < pX.current + charSize && chairs[i][1] + chairSize > pX.current && chairs[i][0] < charSize + pY.current && chairs[i][0] + chairSize > pY.current) {\n        seatNum = i; //자리에 앉았을 시 소켓으로 준비 완료 전송\n\n        if (seatNum !== seatChange) {\n          seatNothing = true;\n          document.getElementById(\"inputTag\").value = \"준비 완료\";\n          console.log(\"SeatNum: \", seatNum);\n          console.log(\"send ready\");\n          seatChange = i;\n          client2.publish({\n            destination: \"/sub/room/0\",\n            headers: {\n              \"content-type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              header: {\n                type: \"interact\"\n              },\n              data: {\n                nickname: \"Jik\",\n                status: \"ready\",\n                chairNum: seatChange,\n                y: pY.current,\n                x: pX.current\n              }\n            }),\n            skipContentLengthHeader: true\n          });\n        } //자리와 이전 자리가 같을 시\n\n      }\n    } //자리에서 벗어났을 시 소켓으로 준비 완료 해제 전송\n\n\n    if (seatNum === -1 && seatNothing === true) {\n      console.log(\"send not ready\");\n      document.getElementById(\"inputTag\").value = \"준비 중\";\n      seatCnt = 0;\n      seatNothing = false;\n      client2.publish({\n        destination: \"/sub/room/0\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          header: {\n            type: \"interact\"\n          },\n          data: {\n            nickname: \"Jik\",\n            status: \"stand\",\n            chairNum: -1,\n            y: pY.current,\n            x: pX.current\n          }\n        }),\n        skipContentLengthHeader: true\n      });\n    }\n\n    if (pY.current < 0) //외부 벽 충돌 감지\n      pY.current = 0;\n    if (pY.current >= mapSize - charSize) pY.current = mapSize - charSize;\n    if (pX.current < 0) pX.current = 0;\n    if (pX.current >= mapSize - charSize) pX.current = mapSize - charSize; //캐릭터 좌표 최신화\n\n    myChar.style.left = pX.current + \"px\";\n    myChar.style.top = pY.current + \"px\";\n  }, 16); //첫 렌더링될 때만 입력받는 input태그로 focus\n\n  useEffect(function () {\n    console.log(\"useEffect focus once\");\n    mapFocus.current.focus(); // connect();\n  }, []); //맵 클릭 시 입력 포커싱 지정\n\n  var changeFocus = function changeFocus() {\n    mapFocus.current.focus();\n  }; //키 눌렀을 때 해당 값 true로 변환\n\n\n  var handleKeyDown = function handleKeyDown(e) {\n    keyPress[e.keyCode.toString()] = true;\n  }; //키 땠을 때 해당 값 false로 변환\n\n\n  var handleKeyUp = function handleKeyUp(e) {\n    keyPress[e.keyCode.toString()] = false;\n  }; //중간에 게임방을 나갈 때 진짜 나갈 것인지 확인 받기\n\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      Value = _useState2[0],\n      setValue = _useState2[1];\n\n  useBeforeunload(function (e) {\n    if (Value !== \"\") e.preventDefault();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"inputTag\",\n    onChange: function onChange(e) {\n      return setValue(e.target.value);\n    },\n    value: \"\\uC900\\uBE44 \\uC911\",\n    type: \"text\",\n    ref: mapFocus,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    readOnly: true,\n    style: {\n      border: \"none\",\n      cursor: \"default\",\n      margin: \"0\",\n      position: \"absolute\",\n      top: 5,\n      left: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"map\",\n    onClick: changeFocus,\n    style: {\n      width: mapSize,\n      height: mapSize,\n      background: \"orange\",\n      position: \"relative\",\n      left: 0,\n      top: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table\",\n    style: {\n      width: table.width,\n      height: table.height,\n      left: table.tbLeft,\n      top: table.tbTop,\n      background: \"green\",\n      position: \"absolute\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 9\n    }\n  }), chairs.map(function (e, idx) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: idx,\n      id: \"chair\" + idx,\n      style: {\n        top: e[0],\n        left: e[1],\n        height: chairSize,\n        width: chairSize,\n        background: \"blue\",\n        position: \"absolute\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 13\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myCharacter\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char1\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char2\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char3\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char4\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char5\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char6\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char7\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"names":["React","useRef","useEffect","useState","useSelector","useDispatch","SavePosX","selectPosX","SavePosY","selectPosY","getUser","useBeforeunload","SockJS","Client","Message","PlayMap","subGatherRoom","dispatch","seatNum","seatChange","seatCnt","seatNothing","mapSize","charSize","chairSize","table","tbTop","tbLeft","width","height","chairs","mapFocus","myChar","keyPress","pX","pY","speed","StompJs","require","client2","connectHeaders","debug","str","console","log","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","webSocketFactory","onConnect","frame","subscribe","onMessageReceived","userJoin","setInterval","publish","destination","headers","body","JSON","stringify","header","type","data","nickname","status","chairNum","x","current","y","skipContentLengthHeader","onStompError","activate","payload","payloadData","parse","document","getElementById","clearInterval","inputCheck","onWebSocketClose","i","value","style","left","top","focus","changeFocus","handleKeyDown","e","keyCode","toString","handleKeyUp","Value","setValue","preventDefault","position","target","border","cursor","margin","background","map","idx","display"],"sources":["C:/SSAFY/2nd semester/S07P12D106/front/src/components/GatherRoomPageCom/PlayMap.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { SavePosX, selectPosX } from \"../../redux/slice/MapPosXSlice\";\r\nimport { SavePosY, selectPosY } from \"../../redux/slice/MapPosYSlice\";\r\nimport { getUser } from \"../../redux/slice/UserSlice\";\r\nimport { useBeforeunload } from \"react-beforeunload\";\r\n\r\n//방 번호 필요\r\n\r\n//socktjs\r\nimport SockJS from \"sockjs-client\";\r\nimport { Client, Message } from \"@stomp/stompjs\";\r\n\r\n//memo : 값을 메모이\r\n//callback : 함수를 메모이\r\nexport default function PlayMap() {\r\n  //this is merge-request\r\n\r\n  var subGatherRoom = null;\r\n  const dispatch = useDispatch();\r\n  let seatNum, seatChange, seatCnt, seatNothing;\r\n  const mapSize = 700;\r\n  const charSize = 50;\r\n  const chairSize = 20;\r\n  const table = {\r\n    tbTop: 100,\r\n    tbLeft: 200,\r\n    width: 300,\r\n    height: 300,\r\n  };\r\n  const chairs = [\r\n    [40, 300],\r\n    [40, 400],\r\n    [160, 100],\r\n    [300, 100],\r\n    [450, 300],\r\n    [450, 400],\r\n    [160, 550],\r\n    [300, 550],\r\n  ];\r\n\r\n  //다른 StompJs 코드\r\n\r\n  //맵 크기\r\n  //포커싱 지정을 위한 변수\r\n  const mapFocus = useRef();\r\n  //div태그를 아바타 객체로 지정\r\n  let myChar;\r\n\r\n  let keyPress = {},\r\n    pX = useRef(useSelector(selectPosX)),\r\n    pY = useRef(useSelector(selectPosY)),\r\n    speed = 5;\r\n\r\n  //SockJs + StompJs\r\n  var StompJs = require(\"@stomp/stompjs\");\r\n\r\n  const client2 = StompJs.Client({\r\n    //websocket 주소만 입력 가능 * ws://, wss:// 로 시작\r\n    // brokerURL: \"https://i7d106.p.ssafy.io:8080/ws\",\r\n    connectHeaders: {},\r\n    debug: function (str) {\r\n      console.log(str);\r\n    },\r\n    reconnectDelay: 5000,\r\n    heartbeatIncoming: 4000,\r\n    heartbeatOutgoing: 4000,\r\n  });\r\n\r\n  client2.webSocketFactory = () => {\r\n    return new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\r\n  };\r\n  console.log(\" client2.onConnect\");\r\n\r\n  client2.onConnect = (frame) => {\r\n    console.log(\"client2.onConnect\");\r\n    //구독하는 곳\r\n    subGatherRoom = client2.subscribe(\"/sub/room/0\", onMessageReceived);\r\n\r\n    console.log(\"frame: \", frame);\r\n\r\n    //유저 방 입장\r\n    userJoin();\r\n\r\n    setInterval(() => {\r\n      client2.publish({\r\n        destination: \"/sub/room/0\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          header: {\r\n            type: \"interact\",\r\n          },\r\n          data: {\r\n            nickname: \"닉네임\",\r\n            status: \"move\",\r\n            chairNum: null,\r\n            x: pX.current,\r\n            y: pY.current,\r\n          },\r\n        }),\r\n        skipContentLengthHeader: true,\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  client2.onStompError = function (frame) {\r\n    // Will be invoked in case of error encountered at Broker\r\n    // Bad login/passcode typically will cause an error\r\n    // Complaint brokers will set `message` header with a brief message. Body may contain details.\r\n    // Compliant brokers will terminate the connection after any error\r\n    console.log(\"Broker reported error: \" + frame.headers[\"message\"]);\r\n    console.log(\"Additional details: \" + frame.body);\r\n  };\r\n  console.log(\"client2.activate();\");\r\n  client2.activate();\r\n\r\n  //웹 소켓 코드 끝\r\n\r\n  //웹소켓 코드 시작\r\n  // const connect = () => {\r\n  //     console.log(\"function connect\");\r\n  //     //소켓 주소를 탑재한 객체 생성\r\n  //     let Sock = new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\r\n  //     console.log(\"let Sock: \", Sock);\r\n  //     //스톰프 프로토콜 탑재\r\n  //     stompClient = over(Sock);\r\n  //     console.log(\"1 let stompClient: \", stompClient);\r\n  //     //연결, 에러 콜백함수 탑재해서 연결 시도\r\n  //     stompClient.connect({}, onConnected, onError);\r\n  //     console.log(\"2 let stompClient: \", stompClient);\r\n  // };\r\n\r\n  // const onConnected = () => {\r\n  //     console.log(\"let stompClient: \", stompClient);\r\n  //     console.log(\"function onConnected\");\r\n  //     // setUserData({ ...userData, connected: true });\r\n  //     //세부 주소 구독\r\n  //     stompClient.subscribe(\"/sub/room/0\", onMessageReceived);\r\n  //     userJoin();\r\n  //     console.log(\"let stompClient: \", stompClient);\r\n  // };\r\n\r\n  const userJoin = () => {\r\n    client2.publish({\r\n      destination: \"/sub/room/0\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        header: {\r\n          type: \"join\",\r\n        },\r\n        data: {\r\n          nickname: \"닉네임\",\r\n        },\r\n      }),\r\n      skipContentLengthHeader: true,\r\n    });\r\n  };\r\n\r\n  // const onError = (err) => {\r\n  //     console.log(\"function onError\");\r\n  //     console.log(err);\r\n  // };\r\n\r\n  const onMessageReceived = (payload) => {\r\n    console.log(\"function onMessageReceived\");\r\n    console.log(\"payload: \", payload);\r\n    var payloadData = JSON.parse(payload.body);\r\n    console.log(\"payloadData: \", payloadData);\r\n  };\r\n\r\n  // const handleMessage = (event) => {\r\n  //     console.log(\"function handleMessage\");\r\n  //     const { value } = event.target;\r\n  //     setUserData({ ...userData, message: value });\r\n  // };\r\n\r\n  //웹소켓 코드 끝\r\n\r\n  //렌더링될 때마다 myChar가 #myCharacter 를 가르킴\r\n  useEffect(() => {\r\n    myChar = document.getElementById(\"myCharacter\");\r\n    console.log(\"myChar rendered\");\r\n    //랜더링 종료 시 인터벌 종료\r\n    return () => {\r\n      clearInterval(inputCheck);\r\n\r\n      console.log(\"pX : \", pX.current);\r\n      console.log(\"pY : \", pY.current);\r\n      dispatch(SavePosX(pX.current));\r\n      dispatch(SavePosY(pY.current));\r\n      console.log(\"render returned\");\r\n      client2.publish({\r\n        destination: \"/sub/room/0\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          header: {\r\n            type: \"leave\",\r\n          },\r\n          data: {\r\n            nickname: \"Jik\",\r\n          },\r\n        }),\r\n\r\n        skipContentLengthHeader: true,\r\n      });\r\n      //랜더링이 종료될 때 소켓 통신 종료\r\n      client2.onWebSocketClose();\r\n      // subGatherRoom.un\r\n    };\r\n  });\r\n\r\n  //부드러운 움직임을 위한 변수 선언\r\n  //일정 초마다 키 입력 확인\r\n  const inputCheck = setInterval(() => {\r\n    if (keyPress[87]) pY.current -= speed;\r\n    if (keyPress[83]) pY.current += speed; // down - s\r\n    if (keyPress[65]) pX.current -= speed; // left - a\r\n    if (keyPress[68]) pX.current += speed;\r\n\r\n    //테이블 충돌 감지\r\n    if (\r\n      pX.current < table.tbLeft + table.width &&\r\n      pX.current + charSize > table.tbLeft &&\r\n      pY.current < table.tbTop + table.height &&\r\n      charSize + pY.current > table.tbTop\r\n    ) {\r\n      if (keyPress[87]) pY.current += speed;\r\n      if (keyPress[83]) pY.current -= speed; // down - s\r\n      if (keyPress[65]) pX.current += speed; // left - a\r\n      if (keyPress[68]) pX.current -= speed;\r\n    }\r\n\r\n    seatNum = -1;\r\n    //의자 충돌 감지\r\n    for (let i = 0; i < 8; i++) {\r\n      if (\r\n        chairs[i][1] < pX.current + charSize &&\r\n        chairs[i][1] + chairSize > pX.current &&\r\n        chairs[i][0] < charSize + pY.current &&\r\n        chairs[i][0] + chairSize > pY.current\r\n      ) {\r\n        seatNum = i;\r\n        //자리에 앉았을 시 소켓으로 준비 완료 전송\r\n        if (seatNum !== seatChange) {\r\n          seatNothing = true;\r\n          document.getElementById(\"inputTag\").value = \"준비 완료\";\r\n          console.log(\"SeatNum: \", seatNum);\r\n          console.log(\"send ready\");\r\n          seatChange = i;\r\n\r\n          client2.publish({\r\n            destination: \"/sub/room/0\",\r\n            headers: { \"content-type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n              header: {\r\n                type: \"interact\",\r\n              },\r\n              data: {\r\n                nickname: \"Jik\",\r\n                status: \"ready\",\r\n                chairNum: seatChange,\r\n                y: pY.current,\r\n                x: pX.current,\r\n              },\r\n            }),\r\n            skipContentLengthHeader: true,\r\n          });\r\n        }\r\n        //자리와 이전 자리가 같을 시\r\n      }\r\n    }\r\n    //자리에서 벗어났을 시 소켓으로 준비 완료 해제 전송\r\n    if (seatNum === -1 && seatNothing === true) {\r\n      console.log(\"send not ready\");\r\n      document.getElementById(\"inputTag\").value = \"준비 중\";\r\n      seatCnt = 0;\r\n      seatNothing = false;\r\n\r\n      client2.publish({\r\n        destination: \"/sub/room/0\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          header: {\r\n            type: \"interact\",\r\n          },\r\n          data: {\r\n            nickname: \"Jik\",\r\n            status: \"stand\",\r\n            chairNum: -1,\r\n            y: pY.current,\r\n            x: pX.current,\r\n          },\r\n        }),\r\n        skipContentLengthHeader: true,\r\n      });\r\n    }\r\n    if (pY.current < 0)\r\n      //외부 벽 충돌 감지\r\n      pY.current = 0;\r\n    if (pY.current >= mapSize - charSize) pY.current = mapSize - charSize;\r\n    if (pX.current < 0) pX.current = 0;\r\n    if (pX.current >= mapSize - charSize) pX.current = mapSize - charSize;\r\n\r\n    //캐릭터 좌표 최신화\r\n    myChar.style.left = pX.current + \"px\";\r\n    myChar.style.top = pY.current + \"px\";\r\n  }, 16);\r\n\r\n  //첫 렌더링될 때만 입력받는 input태그로 focus\r\n  useEffect(() => {\r\n    console.log(\"useEffect focus once\");\r\n    mapFocus.current.focus();\r\n\r\n    // connect();\r\n  }, []);\r\n\r\n  //맵 클릭 시 입력 포커싱 지정\r\n  const changeFocus = () => {\r\n    mapFocus.current.focus();\r\n  };\r\n\r\n  //키 눌렀을 때 해당 값 true로 변환\r\n  const handleKeyDown = (e) => {\r\n    keyPress[e.keyCode.toString()] = true;\r\n  };\r\n  //키 땠을 때 해당 값 false로 변환\r\n  const handleKeyUp = (e) => {\r\n    keyPress[e.keyCode.toString()] = false;\r\n  };\r\n\r\n  //중간에 게임방을 나갈 때 진짜 나갈 것인지 확인 받기\r\n  const [Value, setValue] = useState(\"\");\r\n  useBeforeunload((e) => {\r\n    if (Value !== \"\") e.preventDefault();\r\n  });\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"relative\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n      }}\r\n    >\r\n      <input\r\n        id='inputTag'\r\n        onChange={(e) => setValue(e.target.value)}\r\n        value='준비 중'\r\n        type='text'\r\n        ref={mapFocus}\r\n        onKeyDown={handleKeyDown}\r\n        onKeyUp={handleKeyUp}\r\n        readOnly\r\n        style={{\r\n          border: \"none\",\r\n          cursor: \"default\",\r\n          margin: \"0\",\r\n          position: \"absolute\",\r\n          top: 5,\r\n          left: 5,\r\n        }}\r\n      />\r\n      <div\r\n        id='map'\r\n        onClick={changeFocus}\r\n        style={{\r\n          width: mapSize,\r\n          height: mapSize,\r\n          background: \"orange\",\r\n          position: \"relative\",\r\n          left: 0,\r\n          top: 0,\r\n        }}\r\n      >\r\n        <div\r\n          id='table'\r\n          style={{\r\n            width: table.width,\r\n            height: table.height,\r\n            left: table.tbLeft,\r\n            top: table.tbTop,\r\n            background: \"green\",\r\n            position: \"absolute\",\r\n          }}\r\n        ></div>\r\n\r\n        {chairs.map((e, idx) => {\r\n          return (\r\n            <div\r\n              key={idx}\r\n              id={\"chair\" + idx}\r\n              style={{\r\n                top: e[0],\r\n                left: e[1],\r\n                height: chairSize,\r\n                width: chairSize,\r\n                background: \"blue\",\r\n                position: \"absolute\",\r\n              }}\r\n            ></div>\r\n          );\r\n        })}\r\n        <div\r\n          id='myCharacter'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n          }}\r\n        ></div>\r\n        {/* 다른 유저의 캐릭터 작성 */}\r\n\r\n        <div\r\n          id='char1'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n            display: \"none\",\r\n          }}\r\n        ></div>\r\n        <div\r\n          id='char2'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n            display: \"none\",\r\n          }}\r\n        ></div>\r\n        <div\r\n          id='char3'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n            display: \"none\",\r\n          }}\r\n        ></div>\r\n        <div\r\n          id='char4'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n            display: \"none\",\r\n          }}\r\n        ></div>\r\n        <div\r\n          id='char5'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n            display: \"none\",\r\n          }}\r\n        ></div>\r\n        <div\r\n          id='char6'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n            display: \"none\",\r\n          }}\r\n        ></div>\r\n        <div\r\n          id='char7'\r\n          style={{\r\n            margin: `0px`,\r\n            width: charSize,\r\n            height: charSize,\r\n            background: \"red\",\r\n            position: \"absolute\",\r\n            display: \"none\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}