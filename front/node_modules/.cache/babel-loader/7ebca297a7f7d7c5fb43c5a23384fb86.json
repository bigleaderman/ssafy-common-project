{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OpenViduLayout = /*#__PURE__*/function () {\n  function OpenViduLayout() {\n    _classCallCheck(this, OpenViduLayout);\n\n    _defineProperty(this, \"layoutContainer\", void 0);\n\n    _defineProperty(this, \"opts\", void 0);\n  }\n\n  _createClass(OpenViduLayout, [{\n    key: \"fixAspectRatio\",\n    value: function fixAspectRatio(elem, width) {\n      var sub = elem.querySelector('.OT_root');\n\n      if (sub) {\n        // If this is the parent of a subscriber or publisher then we need\n        // to force the mutation observer on the publisher or subscriber to\n        // trigger to get it to fix it's layout\n        var oldWidth = sub.style.width;\n        sub.style.width = width + 'px'; // sub.style.height = height + 'px';\n\n        sub.style.width = oldWidth || '';\n      }\n    }\n  }, {\n    key: \"positionElement\",\n    value: function positionElement(elem, x, y, width, height, animate) {\n      var _this = this;\n\n      var targetPosition = {\n        left: x + 'px',\n        top: y + 'px',\n        width: width + 'px',\n        height: height + 'px'\n      };\n      this.fixAspectRatio(elem, width);\n\n      if (animate && _jquery[\"default\"]) {\n        (0, _jquery[\"default\"])(elem).stop();\n        (0, _jquery[\"default\"])(elem).animate(targetPosition, animate.duration || 200, animate.easing || 'swing', function () {\n          _this.fixAspectRatio(elem, width);\n\n          if (animate.complete) {\n            animate.complete.call(_this);\n          }\n        });\n      } else {\n        (0, _jquery[\"default\"])(elem).css(targetPosition);\n      }\n\n      this.fixAspectRatio(elem, width);\n    }\n  }, {\n    key: \"getVideoRatio\",\n    value: function getVideoRatio(elem) {\n      if (!elem) {\n        return 3 / 4;\n      }\n\n      var video = elem.querySelector('video');\n\n      if (video && video.videoHeight && video.videoWidth) {\n        return video.videoHeight / video.videoWidth;\n      } else if (elem.videoHeight && elem.videoWidth) {\n        return elem.videoHeight / elem.videoWidth;\n      }\n\n      return 3 / 4;\n    }\n  }, {\n    key: \"getCSSNumber\",\n    value: function getCSSNumber(elem, prop) {\n      var cssStr = (0, _jquery[\"default\"])(elem).css(prop);\n      return cssStr ? parseInt(cssStr, 10) : 0;\n    } // Really cheap UUID function\n\n  }, {\n    key: \"cheapUUID\",\n    value: function cheapUUID() {\n      return (Math.random() * 100000000).toFixed(0);\n    }\n  }, {\n    key: \"getHeight\",\n    value: function getHeight(elem) {\n      var heightStr = (0, _jquery[\"default\"])(elem).css('height');\n      return heightStr ? parseInt(heightStr, 10) : 0;\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth(elem) {\n      var widthStr = (0, _jquery[\"default\"])(elem).css('width');\n      return widthStr ? parseInt(widthStr, 10) : 0;\n    }\n  }, {\n    key: \"getBestDimensions\",\n    value: function getBestDimensions(minR, maxR, count, WIDTH, HEIGHT, targetHeight) {\n      var maxArea, targetCols, targetRows, targetWidth, tWidth, tHeight, tRatio; // Iterate through every possible combination of rows and columns\n      // and see which one has the least amount of whitespace\n\n      for (var i = 1; i <= count; i++) {\n        var colsAux = i;\n        var rowsAux = Math.ceil(count / colsAux); // Try taking up the whole height and width\n\n        tHeight = Math.floor(HEIGHT / rowsAux);\n        tWidth = Math.floor(WIDTH / colsAux);\n        tRatio = tHeight / tWidth;\n\n        if (tRatio > maxR) {\n          // We went over decrease the height\n          tRatio = maxR;\n          tHeight = tWidth * tRatio;\n        } else if (tRatio < minR) {\n          // We went under decrease the width\n          tRatio = minR;\n          tWidth = tHeight / tRatio;\n        }\n\n        var area = tWidth * tHeight * count; // If this width and height takes up the most space then we're going with that\n\n        if (maxArea === undefined || area > maxArea) {\n          maxArea = area;\n          targetHeight = tHeight;\n          targetWidth = tWidth;\n          targetCols = colsAux;\n          targetRows = rowsAux;\n        }\n      }\n\n      return {\n        maxArea: maxArea,\n        targetCols: targetCols,\n        targetRows: targetRows,\n        targetHeight: targetHeight,\n        targetWidth: targetWidth,\n        ratio: targetHeight / targetWidth\n      };\n    }\n  }, {\n    key: \"arrange\",\n    value: function arrange(children, WIDTH, HEIGHT, offsetLeft, offsetTop, fixedRatio, minRatio, maxRatio, animate) {\n      var targetHeight;\n      var count = children.length;\n      var dimensions;\n\n      if (!fixedRatio) {\n        dimensions = this.getBestDimensions(minRatio, maxRatio, count, WIDTH, HEIGHT, targetHeight);\n      } else {\n        // Use the ratio of the first video element we find to approximate\n        var ratio = this.getVideoRatio(children.length > 0 ? children[0] : null);\n        dimensions = this.getBestDimensions(ratio, ratio, count, WIDTH, HEIGHT, targetHeight);\n      } // Loop through each stream in the container and place it inside\n\n\n      var x = 0,\n          y = 0;\n      var rows = [];\n      var row; // Iterate through the children and create an array with a new item for each row\n      // and calculate the width of each row so that we know if we go over the size and need\n      // to adjust\n\n      for (var i = 0; i < children.length; i++) {\n        if (i % dimensions.targetCols === 0) {\n          // This is a new row\n          row = {\n            children: [],\n            width: 0,\n            height: 0\n          };\n          rows.push(row);\n        }\n\n        var elem = children[i];\n        row.children.push(elem);\n        var targetWidth = dimensions.targetWidth;\n        targetHeight = dimensions.targetHeight; // If we're using a fixedRatio then we need to set the correct ratio for this element\n\n        if (fixedRatio) {\n          targetWidth = targetHeight / this.getVideoRatio(elem);\n        }\n\n        row.width += targetWidth;\n        row.height = targetHeight;\n      } // Calculate total row height adjusting if we go too wide\n\n\n      var totalRowHeight = 0;\n      var remainingShortRows = 0;\n\n      for (var _i = 0; _i < rows.length; _i++) {\n        row = rows[_i];\n\n        if (row.width > WIDTH) {\n          // Went over on the width, need to adjust the height proportionally\n          row.height = Math.floor(row.height * (WIDTH / row.width));\n          row.width = WIDTH;\n        } else if (row.width < WIDTH) {\n          remainingShortRows += 1;\n        }\n\n        totalRowHeight += row.height;\n      }\n\n      if (totalRowHeight < HEIGHT && remainingShortRows > 0) {\n        // We can grow some of the rows, we're not taking up the whole height\n        var remainingHeightDiff = HEIGHT - totalRowHeight;\n        totalRowHeight = 0;\n\n        for (var _i2 = 0; _i2 < rows.length; _i2++) {\n          row = rows[_i2];\n\n          if (row.width < WIDTH) {\n            // Evenly distribute the extra height between the short rows\n            var extraHeight = remainingHeightDiff / remainingShortRows;\n\n            if (extraHeight / row.height > (WIDTH - row.width) / row.width) {\n              // We can't go that big or we'll go too wide\n              extraHeight = Math.floor((WIDTH - row.width) / row.width * row.height);\n            }\n\n            row.width += Math.floor(extraHeight / row.height * row.width);\n            row.height += extraHeight;\n            remainingHeightDiff -= extraHeight;\n            remainingShortRows -= 1;\n          }\n\n          totalRowHeight += row.height;\n        }\n      } // vertical centering\n\n\n      y = (HEIGHT - totalRowHeight) / 2; // Iterate through each row and place each child\n\n      for (var _i3 = 0; _i3 < rows.length; _i3++) {\n        row = rows[_i3]; // center the row\n\n        var rowMarginLeft = (WIDTH - row.width) / 2;\n        x = rowMarginLeft;\n\n        for (var j = 0; j < row.children.length; j++) {\n          var _elem = row.children[j];\n          var _targetWidth = dimensions.targetWidth;\n          targetHeight = row.height; // If we're using a fixedRatio then we need to set the correct ratio for this element\n\n          if (fixedRatio) {\n            _targetWidth = Math.floor(targetHeight / this.getVideoRatio(_elem));\n          }\n\n          _elem.style.position = 'absolute'; // $(elem).css('position', 'absolute');\n\n          var actualWidth = _targetWidth - this.getCSSNumber(_elem, 'paddingLeft') - this.getCSSNumber(_elem, 'paddingRight') - this.getCSSNumber(_elem, 'marginLeft') - this.getCSSNumber(_elem, 'marginRight') - this.getCSSNumber(_elem, 'borderLeft') - this.getCSSNumber(_elem, 'borderRight');\n          var actualHeight = targetHeight - this.getCSSNumber(_elem, 'paddingTop') - this.getCSSNumber(_elem, 'paddingBottom') - this.getCSSNumber(_elem, 'marginTop') - this.getCSSNumber(_elem, 'marginBottom') - this.getCSSNumber(_elem, 'borderTop') - this.getCSSNumber(_elem, 'borderBottom');\n          this.positionElement(_elem, x + offsetLeft, y + offsetTop, actualWidth, actualHeight, animate);\n          x += _targetWidth;\n        }\n\n        y += targetHeight;\n      }\n    }\n  }, {\n    key: \"filterDisplayNone\",\n    value: function filterDisplayNone(element) {\n      return element.style.display !== 'none';\n    }\n  }, {\n    key: \"updateLayout\",\n    value: function updateLayout() {\n      if (this.layoutContainer.style.display === 'none') {\n        return;\n      }\n\n      var id = this.layoutContainer.id;\n\n      if (!id) {\n        id = 'OT_' + this.cheapUUID();\n        this.layoutContainer.id = id;\n      }\n\n      var HEIGHT = this.getHeight(this.layoutContainer) - this.getCSSNumber(this.layoutContainer, 'borderTop') - this.getCSSNumber(this.layoutContainer, 'borderBottom');\n      var WIDTH = this.getWidth(this.layoutContainer) - this.getCSSNumber(this.layoutContainer, 'borderLeft') - this.getCSSNumber(this.layoutContainer, 'borderRight');\n      var availableRatio = HEIGHT / WIDTH;\n      var offsetLeft = 0;\n      var offsetTop = 0;\n      var bigOffsetTop = 0;\n      var bigOffsetLeft = 0;\n      var bigOnes = Array.prototype.filter.call(this.layoutContainer.querySelectorAll('#' + id + '>.' + this.opts.bigClass), this.filterDisplayNone);\n      var smallOnes = Array.prototype.filter.call(this.layoutContainer.querySelectorAll('#' + id + '>*:not(.' + this.opts.bigClass + ')'), this.filterDisplayNone);\n\n      if (bigOnes.length > 0 && smallOnes.length > 0) {\n        var bigWidth, bigHeight;\n\n        if (availableRatio > this.getVideoRatio(bigOnes[0])) {\n          // We are tall, going to take up the whole width and arrange small\n          // guys at the bottom\n          bigWidth = WIDTH;\n          bigHeight = Math.floor(HEIGHT * this.opts.bigPercentage);\n          offsetTop = bigHeight;\n          bigOffsetTop = HEIGHT - offsetTop;\n        } else {\n          // We are wide, going to take up the whole height and arrange the small\n          // guys on the right\n          bigHeight = HEIGHT;\n          bigWidth = Math.floor(WIDTH * this.opts.bigPercentage);\n          offsetLeft = bigWidth;\n          bigOffsetLeft = WIDTH - offsetLeft;\n        }\n\n        if (this.opts.bigFirst) {\n          this.arrange(bigOnes, bigWidth, bigHeight, 0, 0, this.opts.bigFixedRatio, this.opts.bigMinRatio, this.opts.bigMaxRatio, this.opts.animate);\n          this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, offsetLeft, offsetTop, this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n        } else {\n          this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, 0, 0, this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n          this.arrange(bigOnes, bigWidth, bigHeight, bigOffsetLeft, bigOffsetTop, this.opts.bigFixedRatio, this.opts.bigMinRatio, this.opts.bigMaxRatio, this.opts.animate);\n        }\n      } else if (bigOnes.length > 0 && smallOnes.length === 0) {\n        this // We only have one bigOne just center it\n        .arrange(bigOnes, WIDTH, HEIGHT, 0, 0, this.opts.bigFixedRatio, this.opts.bigMinRatio, this.opts.bigMaxRatio, this.opts.animate);\n      } else {\n        this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, offsetLeft, offsetTop, this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n      }\n    }\n  }, {\n    key: \"initLayoutContainer\",\n    value: function initLayoutContainer(container, opts) {\n      this.opts = {\n        maxRatio: opts.maxRatio != null ? opts.maxRatio : 3 / 2,\n        minRatio: opts.minRatio != null ? opts.minRatio : 9 / 16,\n        fixedRatio: opts.fixedRatio != null ? opts.fixedRatio : false,\n        animate: opts.animate != null ? opts.animate : false,\n        bigClass: opts.bigClass != null ? opts.bigClass : 'OT_big',\n        bigPercentage: opts.bigPercentage != null ? opts.bigPercentage : 0.8,\n        bigFixedRatio: opts.bigFixedRatio != null ? opts.bigFixedRatio : false,\n        bigMaxRatio: opts.bigMaxRatio != null ? opts.bigMaxRatio : 3 / 2,\n        bigMinRatio: opts.bigMinRatio != null ? opts.bigMinRatio : 9 / 16,\n        bigFirst: opts.bigFirst != null ? opts.bigFirst : true\n      };\n      this.layoutContainer = typeof container === 'string' ? (0, _jquery[\"default\"])(container) : container;\n    }\n  }, {\n    key: \"setLayoutOptions\",\n    value: function setLayoutOptions(options) {\n      this.opts = options;\n    }\n  }]);\n\n  return OpenViduLayout;\n}();\n\nvar _default = OpenViduLayout;\nexports[\"default\"] = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","_jquery","_interopRequireDefault","require","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","_defineProperty","OpenViduLayout","fixAspectRatio","elem","width","sub","querySelector","oldWidth","style","positionElement","x","y","height","animate","_this","targetPosition","left","top","stop","duration","easing","complete","call","css","getVideoRatio","video","videoHeight","videoWidth","getCSSNumber","prop","cssStr","parseInt","cheapUUID","Math","random","toFixed","getHeight","heightStr","getWidth","widthStr","getBestDimensions","minR","maxR","count","WIDTH","HEIGHT","targetHeight","maxArea","targetCols","targetRows","targetWidth","tWidth","tHeight","tRatio","colsAux","rowsAux","ceil","floor","area","undefined","ratio","arrange","children","offsetLeft","offsetTop","fixedRatio","minRatio","maxRatio","dimensions","rows","row","push","totalRowHeight","remainingShortRows","_i","remainingHeightDiff","_i2","extraHeight","_i3","rowMarginLeft","j","_elem","_targetWidth","position","actualWidth","actualHeight","filterDisplayNone","element","display","updateLayout","layoutContainer","id","availableRatio","bigOffsetTop","bigOffsetLeft","bigOnes","Array","filter","querySelectorAll","opts","bigClass","smallOnes","bigWidth","bigHeight","bigPercentage","bigFirst","bigFixedRatio","bigMinRatio","bigMaxRatio","initLayoutContainer","container","setLayoutOptions","options","_default"],"sources":["C:/SSAFY/2nd semester/S07P12D106/front/node_modules/openvidu-react/dist/layout/openvidu-layout.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar OpenViduLayout = /*#__PURE__*/function () {\n  function OpenViduLayout() {\n    _classCallCheck(this, OpenViduLayout);\n\n    _defineProperty(this, \"layoutContainer\", void 0);\n\n    _defineProperty(this, \"opts\", void 0);\n  }\n\n  _createClass(OpenViduLayout, [{\n    key: \"fixAspectRatio\",\n    value: function fixAspectRatio(elem, width) {\n      var sub = elem.querySelector('.OT_root');\n\n      if (sub) {\n        // If this is the parent of a subscriber or publisher then we need\n        // to force the mutation observer on the publisher or subscriber to\n        // trigger to get it to fix it's layout\n        var oldWidth = sub.style.width;\n        sub.style.width = width + 'px'; // sub.style.height = height + 'px';\n\n        sub.style.width = oldWidth || '';\n      }\n    }\n  }, {\n    key: \"positionElement\",\n    value: function positionElement(elem, x, y, width, height, animate) {\n      var _this = this;\n\n      var targetPosition = {\n        left: x + 'px',\n        top: y + 'px',\n        width: width + 'px',\n        height: height + 'px'\n      };\n      this.fixAspectRatio(elem, width);\n\n      if (animate && _jquery[\"default\"]) {\n        (0, _jquery[\"default\"])(elem).stop();\n        (0, _jquery[\"default\"])(elem).animate(targetPosition, animate.duration || 200, animate.easing || 'swing', function () {\n          _this.fixAspectRatio(elem, width);\n\n          if (animate.complete) {\n            animate.complete.call(_this);\n          }\n        });\n      } else {\n        (0, _jquery[\"default\"])(elem).css(targetPosition);\n      }\n\n      this.fixAspectRatio(elem, width);\n    }\n  }, {\n    key: \"getVideoRatio\",\n    value: function getVideoRatio(elem) {\n      if (!elem) {\n        return 3 / 4;\n      }\n\n      var video = elem.querySelector('video');\n\n      if (video && video.videoHeight && video.videoWidth) {\n        return video.videoHeight / video.videoWidth;\n      } else if (elem.videoHeight && elem.videoWidth) {\n        return elem.videoHeight / elem.videoWidth;\n      }\n\n      return 3 / 4;\n    }\n  }, {\n    key: \"getCSSNumber\",\n    value: function getCSSNumber(elem, prop) {\n      var cssStr = (0, _jquery[\"default\"])(elem).css(prop);\n      return cssStr ? parseInt(cssStr, 10) : 0;\n    } // Really cheap UUID function\n\n  }, {\n    key: \"cheapUUID\",\n    value: function cheapUUID() {\n      return (Math.random() * 100000000).toFixed(0);\n    }\n  }, {\n    key: \"getHeight\",\n    value: function getHeight(elem) {\n      var heightStr = (0, _jquery[\"default\"])(elem).css('height');\n      return heightStr ? parseInt(heightStr, 10) : 0;\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth(elem) {\n      var widthStr = (0, _jquery[\"default\"])(elem).css('width');\n      return widthStr ? parseInt(widthStr, 10) : 0;\n    }\n  }, {\n    key: \"getBestDimensions\",\n    value: function getBestDimensions(minR, maxR, count, WIDTH, HEIGHT, targetHeight) {\n      var maxArea, targetCols, targetRows, targetWidth, tWidth, tHeight, tRatio; // Iterate through every possible combination of rows and columns\n      // and see which one has the least amount of whitespace\n\n      for (var i = 1; i <= count; i++) {\n        var colsAux = i;\n        var rowsAux = Math.ceil(count / colsAux); // Try taking up the whole height and width\n\n        tHeight = Math.floor(HEIGHT / rowsAux);\n        tWidth = Math.floor(WIDTH / colsAux);\n        tRatio = tHeight / tWidth;\n\n        if (tRatio > maxR) {\n          // We went over decrease the height\n          tRatio = maxR;\n          tHeight = tWidth * tRatio;\n        } else if (tRatio < minR) {\n          // We went under decrease the width\n          tRatio = minR;\n          tWidth = tHeight / tRatio;\n        }\n\n        var area = tWidth * tHeight * count; // If this width and height takes up the most space then we're going with that\n\n        if (maxArea === undefined || area > maxArea) {\n          maxArea = area;\n          targetHeight = tHeight;\n          targetWidth = tWidth;\n          targetCols = colsAux;\n          targetRows = rowsAux;\n        }\n      }\n\n      return {\n        maxArea: maxArea,\n        targetCols: targetCols,\n        targetRows: targetRows,\n        targetHeight: targetHeight,\n        targetWidth: targetWidth,\n        ratio: targetHeight / targetWidth\n      };\n    }\n  }, {\n    key: \"arrange\",\n    value: function arrange(children, WIDTH, HEIGHT, offsetLeft, offsetTop, fixedRatio, minRatio, maxRatio, animate) {\n      var targetHeight;\n      var count = children.length;\n      var dimensions;\n\n      if (!fixedRatio) {\n        dimensions = this.getBestDimensions(minRatio, maxRatio, count, WIDTH, HEIGHT, targetHeight);\n      } else {\n        // Use the ratio of the first video element we find to approximate\n        var ratio = this.getVideoRatio(children.length > 0 ? children[0] : null);\n        dimensions = this.getBestDimensions(ratio, ratio, count, WIDTH, HEIGHT, targetHeight);\n      } // Loop through each stream in the container and place it inside\n\n\n      var x = 0,\n          y = 0;\n      var rows = [];\n      var row; // Iterate through the children and create an array with a new item for each row\n      // and calculate the width of each row so that we know if we go over the size and need\n      // to adjust\n\n      for (var i = 0; i < children.length; i++) {\n        if (i % dimensions.targetCols === 0) {\n          // This is a new row\n          row = {\n            children: [],\n            width: 0,\n            height: 0\n          };\n          rows.push(row);\n        }\n\n        var elem = children[i];\n        row.children.push(elem);\n        var targetWidth = dimensions.targetWidth;\n        targetHeight = dimensions.targetHeight; // If we're using a fixedRatio then we need to set the correct ratio for this element\n\n        if (fixedRatio) {\n          targetWidth = targetHeight / this.getVideoRatio(elem);\n        }\n\n        row.width += targetWidth;\n        row.height = targetHeight;\n      } // Calculate total row height adjusting if we go too wide\n\n\n      var totalRowHeight = 0;\n      var remainingShortRows = 0;\n\n      for (var _i = 0; _i < rows.length; _i++) {\n        row = rows[_i];\n\n        if (row.width > WIDTH) {\n          // Went over on the width, need to adjust the height proportionally\n          row.height = Math.floor(row.height * (WIDTH / row.width));\n          row.width = WIDTH;\n        } else if (row.width < WIDTH) {\n          remainingShortRows += 1;\n        }\n\n        totalRowHeight += row.height;\n      }\n\n      if (totalRowHeight < HEIGHT && remainingShortRows > 0) {\n        // We can grow some of the rows, we're not taking up the whole height\n        var remainingHeightDiff = HEIGHT - totalRowHeight;\n        totalRowHeight = 0;\n\n        for (var _i2 = 0; _i2 < rows.length; _i2++) {\n          row = rows[_i2];\n\n          if (row.width < WIDTH) {\n            // Evenly distribute the extra height between the short rows\n            var extraHeight = remainingHeightDiff / remainingShortRows;\n\n            if (extraHeight / row.height > (WIDTH - row.width) / row.width) {\n              // We can't go that big or we'll go too wide\n              extraHeight = Math.floor((WIDTH - row.width) / row.width * row.height);\n            }\n\n            row.width += Math.floor(extraHeight / row.height * row.width);\n            row.height += extraHeight;\n            remainingHeightDiff -= extraHeight;\n            remainingShortRows -= 1;\n          }\n\n          totalRowHeight += row.height;\n        }\n      } // vertical centering\n\n\n      y = (HEIGHT - totalRowHeight) / 2; // Iterate through each row and place each child\n\n      for (var _i3 = 0; _i3 < rows.length; _i3++) {\n        row = rows[_i3]; // center the row\n\n        var rowMarginLeft = (WIDTH - row.width) / 2;\n        x = rowMarginLeft;\n\n        for (var j = 0; j < row.children.length; j++) {\n          var _elem = row.children[j];\n          var _targetWidth = dimensions.targetWidth;\n          targetHeight = row.height; // If we're using a fixedRatio then we need to set the correct ratio for this element\n\n          if (fixedRatio) {\n            _targetWidth = Math.floor(targetHeight / this.getVideoRatio(_elem));\n          }\n\n          _elem.style.position = 'absolute'; // $(elem).css('position', 'absolute');\n\n          var actualWidth = _targetWidth - this.getCSSNumber(_elem, 'paddingLeft') - this.getCSSNumber(_elem, 'paddingRight') - this.getCSSNumber(_elem, 'marginLeft') - this.getCSSNumber(_elem, 'marginRight') - this.getCSSNumber(_elem, 'borderLeft') - this.getCSSNumber(_elem, 'borderRight');\n          var actualHeight = targetHeight - this.getCSSNumber(_elem, 'paddingTop') - this.getCSSNumber(_elem, 'paddingBottom') - this.getCSSNumber(_elem, 'marginTop') - this.getCSSNumber(_elem, 'marginBottom') - this.getCSSNumber(_elem, 'borderTop') - this.getCSSNumber(_elem, 'borderBottom');\n          this.positionElement(_elem, x + offsetLeft, y + offsetTop, actualWidth, actualHeight, animate);\n          x += _targetWidth;\n        }\n\n        y += targetHeight;\n      }\n    }\n  }, {\n    key: \"filterDisplayNone\",\n    value: function filterDisplayNone(element) {\n      return element.style.display !== 'none';\n    }\n  }, {\n    key: \"updateLayout\",\n    value: function updateLayout() {\n      if (this.layoutContainer.style.display === 'none') {\n        return;\n      }\n\n      var id = this.layoutContainer.id;\n\n      if (!id) {\n        id = 'OT_' + this.cheapUUID();\n        this.layoutContainer.id = id;\n      }\n\n      var HEIGHT = this.getHeight(this.layoutContainer) - this.getCSSNumber(this.layoutContainer, 'borderTop') - this.getCSSNumber(this.layoutContainer, 'borderBottom');\n      var WIDTH = this.getWidth(this.layoutContainer) - this.getCSSNumber(this.layoutContainer, 'borderLeft') - this.getCSSNumber(this.layoutContainer, 'borderRight');\n      var availableRatio = HEIGHT / WIDTH;\n      var offsetLeft = 0;\n      var offsetTop = 0;\n      var bigOffsetTop = 0;\n      var bigOffsetLeft = 0;\n      var bigOnes = Array.prototype.filter.call(this.layoutContainer.querySelectorAll('#' + id + '>.' + this.opts.bigClass), this.filterDisplayNone);\n      var smallOnes = Array.prototype.filter.call(this.layoutContainer.querySelectorAll('#' + id + '>*:not(.' + this.opts.bigClass + ')'), this.filterDisplayNone);\n\n      if (bigOnes.length > 0 && smallOnes.length > 0) {\n        var bigWidth, bigHeight;\n\n        if (availableRatio > this.getVideoRatio(bigOnes[0])) {\n          // We are tall, going to take up the whole width and arrange small\n          // guys at the bottom\n          bigWidth = WIDTH;\n          bigHeight = Math.floor(HEIGHT * this.opts.bigPercentage);\n          offsetTop = bigHeight;\n          bigOffsetTop = HEIGHT - offsetTop;\n        } else {\n          // We are wide, going to take up the whole height and arrange the small\n          // guys on the right\n          bigHeight = HEIGHT;\n          bigWidth = Math.floor(WIDTH * this.opts.bigPercentage);\n          offsetLeft = bigWidth;\n          bigOffsetLeft = WIDTH - offsetLeft;\n        }\n\n        if (this.opts.bigFirst) {\n          this.arrange(bigOnes, bigWidth, bigHeight, 0, 0, this.opts.bigFixedRatio, this.opts.bigMinRatio, this.opts.bigMaxRatio, this.opts.animate);\n          this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, offsetLeft, offsetTop, this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n        } else {\n          this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, 0, 0, this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n          this.arrange(bigOnes, bigWidth, bigHeight, bigOffsetLeft, bigOffsetTop, this.opts.bigFixedRatio, this.opts.bigMinRatio, this.opts.bigMaxRatio, this.opts.animate);\n        }\n      } else if (bigOnes.length > 0 && smallOnes.length === 0) {\n        this // We only have one bigOne just center it\n        .arrange(bigOnes, WIDTH, HEIGHT, 0, 0, this.opts.bigFixedRatio, this.opts.bigMinRatio, this.opts.bigMaxRatio, this.opts.animate);\n      } else {\n        this.arrange(smallOnes, WIDTH - offsetLeft, HEIGHT - offsetTop, offsetLeft, offsetTop, this.opts.fixedRatio, this.opts.minRatio, this.opts.maxRatio, this.opts.animate);\n      }\n    }\n  }, {\n    key: \"initLayoutContainer\",\n    value: function initLayoutContainer(container, opts) {\n      this.opts = {\n        maxRatio: opts.maxRatio != null ? opts.maxRatio : 3 / 2,\n        minRatio: opts.minRatio != null ? opts.minRatio : 9 / 16,\n        fixedRatio: opts.fixedRatio != null ? opts.fixedRatio : false,\n        animate: opts.animate != null ? opts.animate : false,\n        bigClass: opts.bigClass != null ? opts.bigClass : 'OT_big',\n        bigPercentage: opts.bigPercentage != null ? opts.bigPercentage : 0.8,\n        bigFixedRatio: opts.bigFixedRatio != null ? opts.bigFixedRatio : false,\n        bigMaxRatio: opts.bigMaxRatio != null ? opts.bigMaxRatio : 3 / 2,\n        bigMinRatio: opts.bigMinRatio != null ? opts.bigMinRatio : 9 / 16,\n        bigFirst: opts.bigFirst != null ? opts.bigFirst : true\n      };\n      this.layoutContainer = typeof container === 'string' ? (0, _jquery[\"default\"])(container) : container;\n    }\n  }, {\n    key: \"setLayoutOptions\",\n    value: function setLayoutOptions(options) {\n      this.opts = options;\n    }\n  }]);\n\n  return OpenViduLayout;\n}();\n\nvar _default = OpenViduLayout;\nexports[\"default\"] = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}