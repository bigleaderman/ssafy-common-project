{"ast":null,"code":"import _objectSpread from \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\src\\\\components\\\\GatherRoomPageCom\\\\PlayMap.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { SavePosX, selectPosX } from \"../../redux/slice/MapPosXSlice\";\nimport { SavePosY, selectPosY } from \"../../redux/slice/MapPosYSlice\";\nimport { getUser } from \"../../redux/slice/UserSlice\";\nimport { useBeforeunload } from \"react-beforeunload\";\nimport axios from \"axios\"; //방 번호 필요\n//socktjs\n\nimport { over } from \"stompjs\";\nimport SockJS from \"sockjs-client\"; //memo : 값을 메모이\n//callback : 함수를 메모이\n\nexport default function PlayMap() {\n  var _this = this;\n\n  var stompClient = null;\n  var subGatherRoom = null;\n  var dispatch = useDispatch();\n  var seatNum, seatChange, seatCnt, seatNothing;\n  var mapSize = 700;\n  var charSize = 50;\n  var chairSize = 20;\n  var table = {\n    tbTop: 100,\n    tbLeft: 200,\n    width: 300,\n    height: 300\n  };\n  var chairs = [[40, 300], [40, 400], [160, 100], [300, 100], [450, 300], [450, 400], [160, 550], [300, 550]]; //다른 StompJs 코드\n  //주기적으로 내 위치 정보를 전송\n  //주기적으로 상대방들의 정보 송신\n  //송신받은 정보를 저장\n\n  var _useState = useState({\n    username: dispatch(getUser).nickname,\n    connected: false,\n    message: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      userData = _useState2[0],\n      setUserData = _useState2[1]; //맵 크기\n  //포커싱 지정을 위한 변수\n\n\n  var mapFocus = useRef(); //div태그를 아바타 객체로 지정\n\n  var myChar;\n  var keyPress = {},\n      pX = useRef(useSelector(selectPosX)),\n      pY = useRef(useSelector(selectPosY)),\n      speed = 5; //SockJs + StompJs\n\n  var StompJs = require(\"@stomp/stompjs\");\n\n  var client2 = new StompJs.Client({\n    //websocket 주소만 입력 가능 * ws://, wss:// 로 시작\n    // brokerURL: \"https://i7d106.p.ssafy.io:8080/ws\",\n    connectHeaders: {},\n    debug: function debug(str) {\n      console.log(str);\n    },\n    reconnectDelay: 5000,\n    heartbeatIncoming: 4000,\n    heartbeatOutgoing: 4000\n  });\n\n  client2.webSocketFactory = function () {\n    return new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\n  };\n\n  console.log(\" client2.onConnect\");\n\n  client2.onConnect = function (frame) {\n    //구독하는 곳\n    subGatherRoom = client2.subscribe(\"/sub/room/0\", onMessageReceived);\n    console.log(\"frame: \", frame); //유저 방 입장\n\n    userJoin();\n  };\n\n  client2.onStompError = function (frame) {\n    // Will be invoked in case of error encountered at Broker\n    // Bad login/passcode typically will cause an error\n    // Complaint brokers will set `message` header with a brief message. Body may contain details.\n    // Compliant brokers will terminate the connection after any error\n    console.log(\"Broker reported error: \" + frame.headers[\"message\"]);\n    console.log(\"Additional details: \" + frame.body);\n  };\n\n  console.log(\"client2.activate();\");\n  client2.activate(); //웹 소켓 코드 끝\n  //웹소켓 코드 시작\n\n  var connect = function connect() {\n    console.log(\"function connect\"); //소켓 주소를 탑재한 객체 생성\n\n    var Sock = new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\n    console.log(\"let Sock: \", Sock); //스톰프 프로토콜 탑재\n\n    stompClient = over(Sock);\n    console.log(\"1 let stompClient: \", stompClient); //연결, 에러 콜백함수 탑재해서 연결 시도\n\n    stompClient.connect({}, onConnected, onError);\n    console.log(\"2 let stompClient: \", stompClient);\n  };\n\n  var onConnected = function onConnected() {\n    console.log(\"let stompClient: \", stompClient);\n    console.log(\"function onConnected\"); // setUserData({ ...userData, connected: true });\n    //세부 주소 구독\n\n    stompClient.subscribe(\"/sub/room/0\", onMessageReceived);\n    userJoin();\n    console.log(\"let stompClient: \", stompClient);\n  };\n\n  var userJoin = function userJoin() {\n    client2.publish({\n      destination: \"/sub/room/0\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        header: {\n          type: \"join\"\n        },\n        data: {\n          nickname: \"닉네임\"\n        }\n      }),\n      skipContentLengthHeader: true\n    });\n  };\n\n  var onError = function onError(err) {\n    console.log(\"function onError\");\n    console.log(err);\n  };\n\n  var onMessageReceived = function onMessageReceived(payload) {\n    console.log(\"function onMessageReceived\");\n    console.log(\"payload: \", payload);\n    var payloadData = JSON.parse(payload.body);\n    console.log(\"payloadData: \", payloadData);\n  };\n\n  var handleMessage = function handleMessage(event) {\n    console.log(\"function handleMessage\");\n    var value = event.target.value;\n    setUserData(_objectSpread({}, userData, {\n      message: value\n    }));\n  };\n\n  var sendValue = function sendValue() {\n    client2.publish({\n      destination: \"/sub/room/0\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        header: {\n          type: \"join\"\n        },\n        data: {\n          nickname: \"닉네임\"\n        }\n      }),\n      skipContentLengthHeader: true\n    }); // console.log(stompClient);\n    // if (stompClient) {\n    //     var chatMessage = {\n    //         header: {\n    //             type: \"join\",\n    //         },\n    //         data: {\n    //             nickname: \"닉네임\",\n    //         },\n    //     };\n    //     console.log(chatMessage);\n    //     stompClient.send(\"/pub/room/0\", {}, JSON.stringify(chatMessage));\n    //     // setUserData({ ...userData, message: \"\" });\n    // }\n  }; //웹소켓 코드 끝\n  //렌더링될 때마다 myChar가 #myCharacter 를 가르킴\n\n\n  useEffect(function () {\n    myChar = document.getElementById(\"myCharacter\");\n    console.log(\"myChar rendered\"); //랜더링 종료 시 인터벌 종료\n\n    return function () {\n      clearInterval(inputCheck);\n      console.log(\"pX : \", pX.current);\n      console.log(\"pY : \", pY.current);\n      dispatch(SavePosX(pX.current));\n      dispatch(SavePosY(pY.current));\n      console.log(\"render returned\");\n      client2.publish({\n        destination: \"/sub/room/0\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          header: {\n            type: \"leave\"\n          },\n          data: {\n            nickname: \"Jik\"\n          }\n        }),\n        skipContentLengthHeader: true\n      }); // subGatherRoom.un\n    };\n  }); //부드러운 움직임을 위한 변수 선언\n  //일정 초마다 키 입력 확인\n\n  var inputCheck = setInterval(function () {\n    if (keyPress[87]) pY.current -= speed;\n    if (keyPress[83]) pY.current += speed; // down - s\n\n    if (keyPress[65]) pX.current -= speed; // left - a\n\n    if (keyPress[68]) pX.current += speed; //테이블 충돌 감지\n\n    if (pX.current < table.tbLeft + table.width && pX.current + charSize > table.tbLeft && pY.current < table.tbTop + table.height && charSize + pY.current > table.tbTop) {\n      if (keyPress[87]) pY.current += speed;\n      if (keyPress[83]) pY.current -= speed; // down - s\n\n      if (keyPress[65]) pX.current += speed; // left - a\n\n      if (keyPress[68]) pX.current -= speed;\n    }\n\n    seatNum = -1; //의자 충돌 감지\n\n    for (var i = 0; i < 8; i++) {\n      if (chairs[i][1] < pX.current + charSize && chairs[i][1] + chairSize > pX.current && chairs[i][0] < charSize + pY.current && chairs[i][0] + chairSize > pY.current) {\n        seatNum = i; //자리에 앉았을 시 소켓으로 준비 완료 전송\n\n        if (seatNum != seatChange) {\n          seatNothing = true;\n          document.getElementById(\"inputTag\").value = \"준비 완료\";\n          console.log(\"SeatNum: \", seatNum);\n          console.log(\"send ready\");\n          seatChange = i;\n          client2.publish({\n            destination: \"/sub/room/0\",\n            headers: {\n              \"content-type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              header: {\n                type: \"interact\"\n              },\n              data: {\n                nickname: \"Jik\",\n                status: \"ready\",\n                chairNum: seatChange,\n                y: pY.current,\n                x: pX.current\n              }\n            }),\n            skipContentLengthHeader: true\n          });\n        } //자리와 이전 자리가 같을 시\n\n      }\n    } //자리에서 벗어났을 시 소켓으로 준비 완료 해제 전송\n\n\n    if (seatNum == -1 && seatNothing == true) {\n      console.log(\"send not ready\");\n      document.getElementById(\"inputTag\").value = \"준비 중\";\n      seatCnt = 0;\n      seatNothing = false;\n      client2.publish({\n        destination: \"/sub/room/0\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          header: {\n            type: \"interact\"\n          },\n          data: {\n            nickname: \"Jik\",\n            status: \"stand\",\n            chairNum: -1,\n            y: pY.current,\n            x: pX.current\n          }\n        }),\n        skipContentLengthHeader: true\n      });\n    }\n\n    if (pY.current < 0) //외부 벽 충돌 감지\n      pY.current = 0;\n    if (pY.current >= mapSize - charSize) pY.current = mapSize - charSize;\n    if (pX.current < 0) pX.current = 0;\n    if (pX.current >= mapSize - charSize) pX.current = mapSize - charSize; //캐릭터 좌표 최신화\n\n    myChar.style.left = pX.current + \"px\";\n    myChar.style.top = pY.current + \"px\";\n  }, 16); //첫 렌더링될 때만 입력받는 input태그로 focus\n\n  useEffect(function () {\n    console.log(\"useEffect focus once\");\n    mapFocus.current.focus(); // connect();\n  }, []); //맵 클릭 시 입력 포커싱 지정\n\n  var changeFocus = function changeFocus() {\n    mapFocus.current.focus();\n  }; //키 눌렀을 때 해당 값 true로 변환\n\n\n  var handleKeyDown = function handleKeyDown(e) {\n    keyPress[e.keyCode.toString()] = true;\n  }; //키 땠을 때 해당 값 false로 변환\n\n\n  var handleKeyUp = function handleKeyUp(e) {\n    keyPress[e.keyCode.toString()] = false;\n  }; //중간에 게임방을 나갈 때 진짜 나갈 것인지 확인 받기\n\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      Value = _useState4[0],\n      setValue = _useState4[1];\n\n  useBeforeunload(function (e) {\n    if (Value !== \"\") e.preventDefault();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: sendValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uC1A1\\uBC84\\uD2BC\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"inputTag\",\n    onChange: function onChange(e) {\n      return setValue(e.target.value);\n    },\n    value: \"\\uC900\\uBE44 \\uC911\",\n    type: \"text\",\n    ref: mapFocus,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp,\n    readOnly: true,\n    style: {\n      border: \"none\",\n      cursor: \"default\",\n      margin: \"0\",\n      position: \"absolute\",\n      top: 5,\n      left: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"map\",\n    onClick: changeFocus,\n    style: {\n      width: mapSize,\n      height: mapSize,\n      background: \"orange\",\n      position: \"relative\",\n      left: 0,\n      top: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"table\",\n    style: {\n      width: table.width,\n      height: table.height,\n      left: table.tbLeft,\n      top: table.tbTop,\n      background: \"green\",\n      position: \"absolute\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 17\n    }\n  }), chairs.map(function (e, idx) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: idx,\n      id: \"chair\" + idx,\n      style: {\n        top: e[0],\n        left: e[1],\n        height: chairSize,\n        width: chairSize,\n        background: \"blue\",\n        position: \"absolute\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 25\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myCharacter\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char1\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char2\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char3\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char4\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char5\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char6\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"char7\",\n    style: {\n      margin: \"0px\",\n      width: charSize,\n      height: charSize,\n      background: \"red\",\n      position: \"absolute\",\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"names":["React","useRef","useEffect","useState","useSelector","useDispatch","SavePosX","selectPosX","SavePosY","selectPosY","getUser","useBeforeunload","axios","over","SockJS","PlayMap","stompClient","subGatherRoom","dispatch","seatNum","seatChange","seatCnt","seatNothing","mapSize","charSize","chairSize","table","tbTop","tbLeft","width","height","chairs","username","nickname","connected","message","userData","setUserData","mapFocus","myChar","keyPress","pX","pY","speed","StompJs","require","client2","Client","connectHeaders","debug","str","console","log","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","webSocketFactory","onConnect","frame","subscribe","onMessageReceived","userJoin","onStompError","headers","body","activate","connect","Sock","onConnected","onError","publish","destination","JSON","stringify","header","type","data","skipContentLengthHeader","err","payload","payloadData","parse","handleMessage","event","value","target","sendValue","document","getElementById","clearInterval","inputCheck","current","setInterval","i","status","chairNum","y","x","style","left","top","focus","changeFocus","handleKeyDown","e","keyCode","toString","handleKeyUp","Value","setValue","preventDefault","position","border","cursor","margin","background","map","idx","display"],"sources":["C:/SSAFY/2nd semester/S07P12D106/front/src/components/GatherRoomPageCom/PlayMap.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { SavePosX, selectPosX } from \"../../redux/slice/MapPosXSlice\";\r\nimport { SavePosY, selectPosY } from \"../../redux/slice/MapPosYSlice\";\r\nimport { getUser } from \"../../redux/slice/UserSlice\";\r\nimport { useBeforeunload } from \"react-beforeunload\";\r\nimport axios from \"axios\";\r\n\r\n//방 번호 필요\r\n\r\n//socktjs\r\nimport { over } from \"stompjs\";\r\nimport SockJS from \"sockjs-client\";\r\n\r\n//memo : 값을 메모이\r\n//callback : 함수를 메모이\r\nexport default function PlayMap() {\r\n    var stompClient = null;\r\n    var subGatherRoom = null;\r\n    const dispatch = useDispatch();\r\n    let seatNum, seatChange, seatCnt, seatNothing;\r\n    const mapSize = 700;\r\n    const charSize = 50;\r\n    const chairSize = 20;\r\n    const table = {\r\n        tbTop: 100,\r\n        tbLeft: 200,\r\n        width: 300,\r\n        height: 300,\r\n    };\r\n    const chairs = [\r\n        [40, 300],\r\n        [40, 400],\r\n        [160, 100],\r\n        [300, 100],\r\n        [450, 300],\r\n        [450, 400],\r\n        [160, 550],\r\n        [300, 550],\r\n    ];\r\n\r\n    //다른 StompJs 코드\r\n\r\n    //주기적으로 내 위치 정보를 전송\r\n\r\n    //주기적으로 상대방들의 정보 송신\r\n\r\n    //송신받은 정보를 저장\r\n    const [userData, setUserData] = useState({\r\n        username: dispatch(getUser).nickname,\r\n        connected: false,\r\n        message: \"\",\r\n    });\r\n    //맵 크기\r\n    //포커싱 지정을 위한 변수\r\n    const mapFocus = useRef();\r\n    //div태그를 아바타 객체로 지정\r\n    let myChar;\r\n\r\n    let keyPress = {},\r\n        pX = useRef(useSelector(selectPosX)),\r\n        pY = useRef(useSelector(selectPosY)),\r\n        speed = 5;\r\n\r\n    //SockJs + StompJs\r\n    var StompJs = require(\"@stomp/stompjs\");\r\n\r\n    const client2 = new StompJs.Client({\r\n        //websocket 주소만 입력 가능 * ws://, wss:// 로 시작\r\n        // brokerURL: \"https://i7d106.p.ssafy.io:8080/ws\",\r\n        connectHeaders: {},\r\n        debug: function (str) {\r\n            console.log(str);\r\n        },\r\n        reconnectDelay: 5000,\r\n        heartbeatIncoming: 4000,\r\n        heartbeatOutgoing: 4000,\r\n    });\r\n\r\n    client2.webSocketFactory = () => {\r\n        return new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\r\n    };\r\n    console.log(\" client2.onConnect\");\r\n    client2.onConnect = (frame) => {\r\n        //구독하는 곳\r\n        subGatherRoom = client2.subscribe(\"/sub/room/0\", onMessageReceived);\r\n\r\n        console.log(\"frame: \", frame);\r\n\r\n        //유저 방 입장\r\n        userJoin();\r\n    };\r\n\r\n    client2.onStompError = function (frame) {\r\n        // Will be invoked in case of error encountered at Broker\r\n        // Bad login/passcode typically will cause an error\r\n        // Complaint brokers will set `message` header with a brief message. Body may contain details.\r\n        // Compliant brokers will terminate the connection after any error\r\n        console.log(\"Broker reported error: \" + frame.headers[\"message\"]);\r\n        console.log(\"Additional details: \" + frame.body);\r\n    };\r\n    console.log(\"client2.activate();\");\r\n    client2.activate();\r\n\r\n    //웹 소켓 코드 끝\r\n\r\n    //웹소켓 코드 시작\r\n    const connect = () => {\r\n        console.log(\"function connect\");\r\n        //소켓 주소를 탑재한 객체 생성\r\n        let Sock = new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\r\n        console.log(\"let Sock: \", Sock);\r\n        //스톰프 프로토콜 탑재\r\n        stompClient = over(Sock);\r\n        console.log(\"1 let stompClient: \", stompClient);\r\n        //연결, 에러 콜백함수 탑재해서 연결 시도\r\n        stompClient.connect({}, onConnected, onError);\r\n        console.log(\"2 let stompClient: \", stompClient);\r\n    };\r\n\r\n    const onConnected = () => {\r\n        console.log(\"let stompClient: \", stompClient);\r\n        console.log(\"function onConnected\");\r\n        // setUserData({ ...userData, connected: true });\r\n        //세부 주소 구독\r\n        stompClient.subscribe(\"/sub/room/0\", onMessageReceived);\r\n        userJoin();\r\n        console.log(\"let stompClient: \", stompClient);\r\n    };\r\n\r\n    const userJoin = () => {\r\n        client2.publish({\r\n            destination: \"/sub/room/0\",\r\n            headers: { \"content-type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                header: {\r\n                    type: \"join\",\r\n                },\r\n                data: {\r\n                    nickname: \"닉네임\",\r\n                },\r\n            }),\r\n            skipContentLengthHeader: true,\r\n        });\r\n    };\r\n\r\n    const onError = (err) => {\r\n        console.log(\"function onError\");\r\n        console.log(err);\r\n    };\r\n\r\n    const onMessageReceived = (payload) => {\r\n        console.log(\"function onMessageReceived\");\r\n        console.log(\"payload: \", payload);\r\n        var payloadData = JSON.parse(payload.body);\r\n        console.log(\"payloadData: \", payloadData);\r\n    };\r\n\r\n    const handleMessage = (event) => {\r\n        console.log(\"function handleMessage\");\r\n        const { value } = event.target;\r\n        setUserData({ ...userData, message: value });\r\n    };\r\n\r\n    const sendValue = () => {\r\n        client2.publish({\r\n            destination: \"/sub/room/0\",\r\n            headers: { \"content-type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                header: {\r\n                    type: \"join\",\r\n                },\r\n                data: {\r\n                    nickname: \"닉네임\",\r\n                },\r\n            }),\r\n            skipContentLengthHeader: true,\r\n        });\r\n\r\n        // console.log(stompClient);\r\n        // if (stompClient) {\r\n        //     var chatMessage = {\r\n        //         header: {\r\n        //             type: \"join\",\r\n        //         },\r\n        //         data: {\r\n        //             nickname: \"닉네임\",\r\n        //         },\r\n        //     };\r\n        //     console.log(chatMessage);\r\n        //     stompClient.send(\"/pub/room/0\", {}, JSON.stringify(chatMessage));\r\n        //     // setUserData({ ...userData, message: \"\" });\r\n        // }\r\n    };\r\n\r\n    //웹소켓 코드 끝\r\n\r\n    //렌더링될 때마다 myChar가 #myCharacter 를 가르킴\r\n    useEffect(() => {\r\n        myChar = document.getElementById(\"myCharacter\");\r\n        console.log(\"myChar rendered\");\r\n        //랜더링 종료 시 인터벌 종료\r\n        return () => {\r\n            clearInterval(inputCheck);\r\n\r\n            console.log(\"pX : \", pX.current);\r\n            console.log(\"pY : \", pY.current);\r\n            dispatch(SavePosX(pX.current));\r\n            dispatch(SavePosY(pY.current));\r\n            console.log(\"render returned\");\r\n            client2.publish({\r\n                destination: \"/sub/room/0\",\r\n                headers: { \"content-type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    header: {\r\n                        type: \"leave\",\r\n                    },\r\n                    data: {\r\n                        nickname: \"Jik\",\r\n                    },\r\n                }),\r\n\r\n                skipContentLengthHeader: true,\r\n            });\r\n            // subGatherRoom.un\r\n        };\r\n    });\r\n\r\n    //부드러운 움직임을 위한 변수 선언\r\n    //일정 초마다 키 입력 확인\r\n    const inputCheck = setInterval(() => {\r\n        if (keyPress[87]) pY.current -= speed;\r\n        if (keyPress[83]) pY.current += speed; // down - s\r\n        if (keyPress[65]) pX.current -= speed; // left - a\r\n        if (keyPress[68]) pX.current += speed;\r\n\r\n        //테이블 충돌 감지\r\n        if (\r\n            pX.current < table.tbLeft + table.width &&\r\n            pX.current + charSize > table.tbLeft &&\r\n            pY.current < table.tbTop + table.height &&\r\n            charSize + pY.current > table.tbTop\r\n        ) {\r\n            if (keyPress[87]) pY.current += speed;\r\n            if (keyPress[83]) pY.current -= speed; // down - s\r\n            if (keyPress[65]) pX.current += speed; // left - a\r\n            if (keyPress[68]) pX.current -= speed;\r\n        }\r\n\r\n        seatNum = -1;\r\n        //의자 충돌 감지\r\n        for (let i = 0; i < 8; i++) {\r\n            if (\r\n                chairs[i][1] < pX.current + charSize &&\r\n                chairs[i][1] + chairSize > pX.current &&\r\n                chairs[i][0] < charSize + pY.current &&\r\n                chairs[i][0] + chairSize > pY.current\r\n            ) {\r\n                seatNum = i;\r\n                //자리에 앉았을 시 소켓으로 준비 완료 전송\r\n                if (seatNum != seatChange) {\r\n                    seatNothing = true;\r\n                    document.getElementById(\"inputTag\").value = \"준비 완료\";\r\n                    console.log(\"SeatNum: \", seatNum);\r\n                    console.log(\"send ready\");\r\n                    seatChange = i;\r\n\r\n                    client2.publish({\r\n                        destination: \"/sub/room/0\",\r\n                        headers: { \"content-type\": \"application/json\" },\r\n                        body: JSON.stringify({\r\n                            header: {\r\n                                type: \"interact\",\r\n                            },\r\n                            data: {\r\n                                nickname: \"Jik\",\r\n                                status: \"ready\",\r\n                                chairNum: seatChange,\r\n                                y: pY.current,\r\n                                x: pX.current,\r\n                            },\r\n                        }),\r\n                        skipContentLengthHeader: true,\r\n                    });\r\n                }\r\n                //자리와 이전 자리가 같을 시\r\n            }\r\n        }\r\n        //자리에서 벗어났을 시 소켓으로 준비 완료 해제 전송\r\n        if (seatNum == -1 && seatNothing == true) {\r\n            console.log(\"send not ready\");\r\n            document.getElementById(\"inputTag\").value = \"준비 중\";\r\n            seatCnt = 0;\r\n            seatNothing = false;\r\n\r\n            client2.publish({\r\n                destination: \"/sub/room/0\",\r\n                headers: { \"content-type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    header: {\r\n                        type: \"interact\",\r\n                    },\r\n                    data: {\r\n                        nickname: \"Jik\",\r\n                        status: \"stand\",\r\n                        chairNum: -1,\r\n                        y: pY.current,\r\n                        x: pX.current,\r\n                    },\r\n                }),\r\n                skipContentLengthHeader: true,\r\n            });\r\n        }\r\n        if (pY.current < 0)\r\n            //외부 벽 충돌 감지\r\n            pY.current = 0;\r\n        if (pY.current >= mapSize - charSize) pY.current = mapSize - charSize;\r\n        if (pX.current < 0) pX.current = 0;\r\n        if (pX.current >= mapSize - charSize) pX.current = mapSize - charSize;\r\n\r\n        //캐릭터 좌표 최신화\r\n        myChar.style.left = pX.current + \"px\";\r\n        myChar.style.top = pY.current + \"px\";\r\n    }, 16);\r\n\r\n    //첫 렌더링될 때만 입력받는 input태그로 focus\r\n    useEffect(() => {\r\n        console.log(\"useEffect focus once\");\r\n        mapFocus.current.focus();\r\n\r\n        // connect();\r\n    }, []);\r\n\r\n    //맵 클릭 시 입력 포커싱 지정\r\n    const changeFocus = () => {\r\n        mapFocus.current.focus();\r\n    };\r\n\r\n    //키 눌렀을 때 해당 값 true로 변환\r\n    const handleKeyDown = (e) => {\r\n        keyPress[e.keyCode.toString()] = true;\r\n    };\r\n    //키 땠을 때 해당 값 false로 변환\r\n    const handleKeyUp = (e) => {\r\n        keyPress[e.keyCode.toString()] = false;\r\n    };\r\n\r\n    //중간에 게임방을 나갈 때 진짜 나갈 것인지 확인 받기\r\n    const [Value, setValue] = useState(\"\");\r\n    useBeforeunload((e) => {\r\n        if (Value !== \"\") e.preventDefault();\r\n    });\r\n    return (\r\n        <div\r\n            style={{\r\n                position: \"relative\",\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n            }}\r\n        >\r\n            <button onClick={sendValue}>전송버튼</button>\r\n            <input\r\n                id=\"inputTag\"\r\n                onChange={(e) => setValue(e.target.value)}\r\n                value=\"준비 중\"\r\n                type=\"text\"\r\n                ref={mapFocus}\r\n                onKeyDown={handleKeyDown}\r\n                onKeyUp={handleKeyUp}\r\n                readOnly\r\n                style={{\r\n                    border: \"none\",\r\n                    cursor: \"default\",\r\n                    margin: \"0\",\r\n                    position: \"absolute\",\r\n                    top: 5,\r\n                    left: 5,\r\n                }}\r\n            />\r\n            <div\r\n                id=\"map\"\r\n                onClick={changeFocus}\r\n                style={{\r\n                    width: mapSize,\r\n                    height: mapSize,\r\n                    background: \"orange\",\r\n                    position: \"relative\",\r\n                    left: 0,\r\n                    top: 0,\r\n                }}\r\n            >\r\n                <div\r\n                    id=\"table\"\r\n                    style={{\r\n                        width: table.width,\r\n                        height: table.height,\r\n                        left: table.tbLeft,\r\n                        top: table.tbTop,\r\n                        background: \"green\",\r\n                        position: \"absolute\",\r\n                    }}\r\n                ></div>\r\n\r\n                {chairs.map((e, idx) => {\r\n                    return (\r\n                        <div\r\n                            key={idx}\r\n                            id={\"chair\" + idx}\r\n                            style={{\r\n                                top: e[0],\r\n                                left: e[1],\r\n                                height: chairSize,\r\n                                width: chairSize,\r\n                                background: \"blue\",\r\n                                position: \"absolute\",\r\n                            }}\r\n                        ></div>\r\n                    );\r\n                })}\r\n                <div\r\n                    id=\"myCharacter\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                    }}\r\n                ></div>\r\n                {/* 다른 유저의 캐릭터 작성 */}\r\n\r\n                <div\r\n                    id=\"char1\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                        display: \"none\",\r\n                    }}\r\n                ></div>\r\n                <div\r\n                    id=\"char2\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                        display: \"none\",\r\n                    }}\r\n                ></div>\r\n                <div\r\n                    id=\"char3\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                        display: \"none\",\r\n                    }}\r\n                ></div>\r\n                <div\r\n                    id=\"char4\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                        display: \"none\",\r\n                    }}\r\n                ></div>\r\n                <div\r\n                    id=\"char5\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                        display: \"none\",\r\n                    }}\r\n                ></div>\r\n                <div\r\n                    id=\"char6\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                        display: \"none\",\r\n                    }}\r\n                ></div>\r\n                <div\r\n                    id=\"char7\"\r\n                    style={{\r\n                        margin: `0px`,\r\n                        width: charSize,\r\n                        height: charSize,\r\n                        background: \"red\",\r\n                        position: \"absolute\",\r\n                        display: \"none\",\r\n                    }}\r\n                ></div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}