{"ast":null,"code":"import _taggedTemplateLiteral from \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nimport _objectSpread from \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\SSAFY\\\\2nd semester\\\\S07P12D106\\\\front\\\\src\\\\components\\\\RoomListPageCom\\\\Chat.js\",\n    _templateObject,\n    _templateObject2;\n\nimport React, { useState, useEffect } from \"react\";\nimport SockJS from \"sockjs-client\";\nimport { over } from \"stompjs\";\nimport { Paper, Box, Typography, Button, Stack } from \"@mui/material\";\nimport styled from \"styled-components\"; // <남은 일>\n// 닉네임을 받아와야함 : login하면 닉네임이 redux에 저장되니 거기서 가져오자\n\nvar stompClient = null;\n\nfunction Chat() {\n  var _this = this;\n\n  // 채팅 목록\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      Chats = _useState2[0],\n      setChats = _useState2[1]; // 보내는 채팅\n\n\n  var _useState3 = useState({\n    senderNickname: \"이름\",\n    message: \"\"\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userChat = _useState4[0],\n      setUserChat = _useState4[1]; // roomListPage 들어오면 연결\n\n\n  useEffect(function () {\n    connect();\n  }, []);\n\n  var connect = function connect() {\n    var Sock = new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\n    stompClient = over(Sock);\n    stompClient.connect({}, onConnected, onError);\n  };\n\n  var onConnected = function onConnected() {\n    stompClient.subscribe(\"/sub/lobby-chat\", onMessageReceived);\n  }; // 채팅 받기\n\n\n  var onMessageReceived = function onMessageReceived(payload) {\n    var payloadData = JSON.parse(payload.body);\n    Chats.push(payloadData);\n    setChats(_toConsumableArray(Chats));\n  };\n\n  var onError = function onError(err) {\n    console.log(err);\n  }; // 채팅 적기\n\n\n  var handleMessage = function handleMessage(event) {\n    var value = event.target.value;\n    setUserChat(_objectSpread({}, userChat, {\n      message: value\n    }));\n  }; // 채팅 전송\n\n\n  var sendValue = function sendValue() {\n    if (stompClient) {\n      var chatMessage = {\n        senderNickname: userChat.senderNickname,\n        message: userChat.message\n      };\n      stompClient.send(\"/pub/lobby-chat\", {}, JSON.stringify(chatMessage));\n      setUserChat(_objectSpread({}, userChat, {\n        message: \"\"\n      }));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Paper, {\n    sx: {\n      width: 800,\n      height: '130px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Border, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      pb: 0.5,\n      height: 70\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(UL, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, Chats.map(function (chat, index) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      sx: {\n        mb: 1\n      },\n      align: \"left\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 37\n      }\n    }, chat.senderNickname, \" : \", chat.message));\n  }))), /*#__PURE__*/React.createElement(Stack, {\n    direction: \"row\",\n    sx: {\n      p: 0.5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    style: {\n      height: 20,\n      width: '100%'\n    },\n    value: userChat.message,\n    onChange: handleMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    sx: {\n      ml: 1,\n      height: 25\n    },\n    onClick: sendValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, \"send\"))));\n}\n\nvar UL = styled.section(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    list-style: none;\\n    display: flex;\\n    flex-direction: column;\\n\"])));\nvar Border = styled.section(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    border: 1px solid rgba(0, 0, 0, 0.2);\\n    border-radius: 5px;\\n    margin: 0.5em\\n    \\n\"])));\nexport default Chat;","map":{"version":3,"names":["React","useState","useEffect","SockJS","over","Paper","Box","Typography","Button","Stack","styled","stompClient","Chat","Chats","setChats","senderNickname","message","userChat","setUserChat","connect","Sock","onConnected","onError","subscribe","onMessageReceived","payload","payloadData","JSON","parse","body","push","err","console","log","handleMessage","event","value","target","sendValue","chatMessage","send","stringify","width","height","pb","map","chat","index","mb","p","ml","UL","section","Border"],"sources":["C:/SSAFY/2nd semester/S07P12D106/front/src/components/RoomListPageCom/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport SockJS from \"sockjs-client\";\r\nimport { over } from \"stompjs\";\r\nimport {\r\n    Paper,\r\n    Box,\r\n    Typography,\r\n    Button,\r\n    Stack,\r\n} from \"@mui/material\";\r\nimport styled from \"styled-components\";\r\n\r\n// <남은 일>\r\n// 닉네임을 받아와야함 : login하면 닉네임이 redux에 저장되니 거기서 가져오자\r\n\r\nvar stompClient = null;\r\nfunction Chat() {\r\n    // 채팅 목록\r\n    const [Chats, setChats] = useState([]);\r\n    // 보내는 채팅\r\n    const [userChat, setUserChat] = useState({\r\n        senderNickname: \"이름\",\r\n        message: \"\",\r\n    });\r\n    // roomListPage 들어오면 연결\r\n    useEffect(() => {\r\n        connect();\r\n    }, []);\r\n\r\n    const connect = () => {\r\n        let Sock = new SockJS(\"https://i7d106.p.ssafy.io:8080/ws\");\r\n        stompClient = over(Sock);\r\n        stompClient.connect({}, onConnected, onError);\r\n    };\r\n\r\n    const onConnected = () => {\r\n        stompClient.subscribe(\"/sub/lobby-chat\", onMessageReceived);\r\n    };\r\n\r\n    // 채팅 받기\r\n    const onMessageReceived = (payload) => {\r\n        var payloadData = JSON.parse(payload.body);\r\n        Chats.push(payloadData);\r\n        setChats([...Chats]);\r\n    };\r\n\r\n    const onError = (err) => {\r\n        console.log(err);\r\n    };\r\n\r\n    // 채팅 적기\r\n    const handleMessage = (event) => {\r\n        const { value } = event.target;\r\n        setUserChat({ ...userChat, message: value });\r\n    };\r\n\r\n    // 채팅 전송\r\n    const sendValue = () => {\r\n        \r\n        if (stompClient) {\r\n            var chatMessage = {\r\n                senderNickname: userChat.senderNickname,\r\n                message: userChat.message,\r\n            };\r\n            stompClient.send(\"/pub/lobby-chat\", {}, JSON.stringify(chatMessage));\r\n            setUserChat({ ...userChat, message: \"\" });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Paper sx={{width:800, height:'130px'}}>\r\n            <Border>\r\n                <Box sx={{pb:0.5, height:70}}>\r\n                    <UL>\r\n                        {Chats.map((chat, index) => {\r\n                            return (\r\n                                <li key={index}>\r\n                                    <Typography sx={{ mb: 1 }} align=\"left\">\r\n                                        {chat.senderNickname} : {chat.message}\r\n                                    </Typography>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </UL>\r\n                </Box>\r\n\r\n                <Stack direction=\"row\" sx={{p:0.5}}>\r\n                    <input\r\n                        type=\"text\"\r\n                        style={{height:20,width:'100%'}}\r\n                        value={userChat.message}\r\n                        onChange={handleMessage}\r\n                    />\r\n                    {/* <button onClick={sendValue}>send</button> */}\r\n                    <Button variant=\"outlined\" sx={{ml:1,height:25}} onClick={sendValue}>send</Button>\r\n                </Stack>\r\n            </Border>\r\n        </Paper>\r\n    );\r\n}\r\nconst UL = styled.section`\r\n    list-style: none;\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\nconst Border = styled.section`\r\n    border: 1px solid rgba(0, 0, 0, 0.2);\r\n    border-radius: 5px;\r\n    margin: 0.5em\r\n    \r\n`;\r\n\r\nexport default Chat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}